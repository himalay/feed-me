(this.webpackJsonpKhabar=this.webpackJsonpKhabar||[]).push([[1],{128:function(e,t,n){e.exports=n(269)},134:function(e,t,n){var a={"./ion-action-sheet.entry.js":[271,5],"./ion-alert.entry.js":[272,6],"./ion-app_8.entry.js":[273,7],"./ion-avatar_3.entry.js":[274,18],"./ion-back-button.entry.js":[275,19],"./ion-backdrop.entry.js":[276,43],"./ion-button_2.entry.js":[277,20],"./ion-card_5.entry.js":[278,21],"./ion-checkbox.entry.js":[279,22],"./ion-chip.entry.js":[280,23],"./ion-col_3.entry.js":[281,44],"./ion-datetime_3.entry.js":[282,10],"./ion-fab_3.entry.js":[283,24],"./ion-img.entry.js":[284,45],"./ion-infinite-scroll_2.entry.js":[285,46],"./ion-input.entry.js":[286,25],"./ion-item-option_3.entry.js":[287,26],"./ion-item_8.entry.js":[288,27],"./ion-loading.entry.js":[289,28],"./ion-menu_3.entry.js":[290,29],"./ion-modal.entry.js":[291,8],"./ion-nav_2.entry.js":[292,15],"./ion-popover.entry.js":[293,9],"./ion-progress-bar.entry.js":[294,30],"./ion-radio_2.entry.js":[295,31],"./ion-range.entry.js":[296,32],"./ion-refresher_2.entry.js":[297,11],"./ion-reorder_2.entry.js":[298,17],"./ion-ripple-effect.entry.js":[299,47],"./ion-route_4.entry.js":[300,33],"./ion-searchbar.entry.js":[301,34],"./ion-segment_2.entry.js":[302,35],"./ion-select_3.entry.js":[303,36],"./ion-slide_2.entry.js":[304,48],"./ion-spinner.entry.js":[305,13],"./ion-split-pane.entry.js":[306,49],"./ion-tab-bar_2.entry.js":[307,37],"./ion-tab_2.entry.js":[308,16],"./ion-text.entry.js":[309,38],"./ion-textarea.entry.js":[310,39],"./ion-toast.entry.js":[311,40],"./ion-toggle.entry.js":[312,12],"./ion-virtual-scroll.entry.js":[313,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=134,e.exports=r},155:function(e,t,n){var a={"./ion-icon.entry.js":[317,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=155,e.exports=r},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(12),c=n(0),l=n.n(c),i=n(42),s=n.n(i),u=n(28),d=n(14),m=n(2),f=n(36),p=n(126),h=n(10),b=n(13),g=n(16),E=n(121),v=Object(g.a)({loading:!1,theme:"dark",feeds:[],tags:[],selectedFeeds:{},feedOrder:[]},Object.entries(localStorage).reduce((function(e,t){var n=Object(h.a)(t,2),a=n[0],r=n[1];try{e[a]=JSON.parse(r)}catch(o){e[a]=r}return e}),{})),j=Object(E.a)(v),y=j.setGlobalState,O=j.useGlobalState,w=function(e,t){y(e,t);try{window.localStorage[e]=JSON.stringify(t)}catch(n){window.localStorage[e]=t}},k=n(31),x=n.n(k),C=n(32),S=n.n(C),N=function(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),n=0;if(t<2)return"a moment ago";if(t<5)return"moments ago";if(t<60)return t+" seconds ago";if(t<120)return"a minute ago";if(t<3600){for(;t>=60;)t-=60,n+=1;return n+" minutes ago"}if(t<7200)return"an hour ago";if(t<86400){for(;t>=3600;)t-=3600,n+=1;return n+" hours ago"}if(t<172800)return"a day ago";if(t<604800){for(;t>=172800;)t-=172800,n+=1;return n+" days ago"}if(t<1209600)return"a week ago";if(t<2592e3){for(;t>=604800;)t-=604800,n+=1;return n+" weeks ago"}if(t<5184e3)return"a month ago";if(t<31536e3){for(;t>=2592e3;)t-=2592e3,n+=1;return n+" months ago"}return t<141912e4?"more than year ago":"never"},_=function(e){return Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))},I=function(e){var t=e.article;return l.a.createElement(m.e,null,t.image.normal?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{style:{display:"inherit"},onClick:_(t.source.targetUrl)},l.a.createElement("img",{className:"card-img",alt:t.title||t.source.authorName||"x",src:t.image.normal})),l.a.createElement(m.p,{className:"item-text text-left"},l.a.createElement("h2",null,t.title),l.a.createElement("p",null,t.description))):l.a.createElement(m.g,{className:"p-0"},l.a.createElement(m.o,{detail:!1,button:!0,onClick:_(t.source.targetUrl),lines:"none"},l.a.createElement(m.b,{className:"favicon",slot:"start"},l.a.createElement("img",{alt:t.source.name,src:"https://www.google.com/s2/favicons?domain=".concat(t.source.targetUrl)})),l.a.createElement(m.p,{className:"item-text"},l.a.createElement("h2",null,t.title),l.a.createElement("p",null,t.description)))),l.a.createElement(m.f,{className:"item-footer"},l.a.createElement("a",{className:"sub-link",href:t.source.sourceUrl,target:"_system",rel:"noopener noreferrer"},t.source.likesCount,l.a.createElement(m.n,{title:"Up-votes",icon:b.e,className:"up-arrow"}),t.source.commentsCount,l.a.createElement(m.n,{title:"Comments",style:{marginLeft:".15em"},icon:b.f}))," ".concat(N(t.source.createdAt)," by "),l.a.createElement("a",{className:"sub-link",href:["reddit","redditprogramming"].includes("segment")?"https://reddit.com/u/".concat(t.source.username):t.source.authorUrl,target:"_system",rel:"noopener noreferrer"},t.source.authorName||t.source.username)))},F=l.a.memo((function(e){var t=e.data,n=void 0===t?[]:t,a=e.loading,r=e.doRefresh;return l.a.createElement(m.D,{className:"block"},l.a.createElement(m.i,{className:"slide-content"},l.a.createElement(m.u,{slot:"fixed",onIonRefresh:r},l.a.createElement(m.v,{refreshingSpinner:"dots"})),a&&l.a.createElement(m.F,{name:"dots",duration:30}),n.map((function(e){return l.a.createElement(I,{key:e._id,article:e})}))))})),R=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.usepanda.com/v4/articles?feeds=".concat(t,"&limit=30&page=1&sort=latest"));case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.index,n=void 0===t?0:t,a=e.onIndexChange,i=O("selectedFeeds"),s=Object(h.a)(i,1)[0],u=O("feedOrder"),d=Object(h.a)(u,1)[0],f=Object(c.useState)(""),p=Object(h.a)(f,2),b=p[0],g=p[1],E=Object(c.useState)(),v=Object(h.a)(E,2),j=v[0],y=v[1],k=Object(c.useRef)(null),x=function(e){return w("selectedFeeds",e)},C=Object(c.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],g(n?t:""),a=S()(s),e.next=5,R(t);case 5:o=e.sent,a[t].data=o,a[t].updatedAt=Date.now(),x(a),g("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]),N=Object(c.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=s[t])&&Date.now()-(+n.updatedAt||0)>36e5)){e.next=5;break}return console.log("Fetching feed data for: "+n.title),e.next=5,C(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,C]),_=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=3;break}return e.next=3,C(j,!1);case 3:t.detail.complete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=k.current)||void 0===t?void 0:t.getActiveIndex();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:n=e.t0,a(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=function(){if(n>=0&&n!==d.indexOf(j)){var e,t=d[n];y(t),null===(e=k.current)||void 0===e||e.slideTo(n).then((function(){return N(t)})).then((function(){return console.log("Slide index: "+n)})).catch(console.error)}};if(j)e();else{var t=d[0];y(t),N(t).then(e).catch(console.error)}}),[s,d,N,j,n]),l.a.createElement(m.E,{ref:k,onIonSlideWillChange:I},d.map((function(e,t){return l.a.createElement(F,{key:e+t,data:s[e].data,loading:b===e,doRefresh:_})})))};function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var U=l.a.createElement("path",{d:"M20.09 30.42l-6.1 3.53v18.87l58.8 33.95V60.85z",fill:"#ef8769"}),P=l.a.createElement("path",{d:"M72.79 0l-58.8 33.95v18.87l6.1 3.53 52.7-30.43z",fill:"#f4b691"}),W=function(e){var t=e.svgRef,n=e.title,a=T(e,["svgRef","title"]);return l.a.createElement("svg",D({viewBox:"0 0 86.77 86.77",ref:t},a),n?l.a.createElement("title",null,n):null,U,P)},K=l.a.forwardRef((function(e,t){return l.a.createElement(W,D({svgRef:t},e))})),L=(n.p,function(e){return Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))}),B=[{url:"khabar.github.io",title:"Progressive Web App",description:l.a.createElement(l.a.Fragment,null,"The Web-app/PWA version of ",l.a.createElement("strong",null,"Khabar")," app is also available and powered by GitHub Pages.")},{logo:b.o,url:"github.com/khabar",title:"Source Code",description:"The complete source of this application is available in GitGub."},{logo:"https://usepanda.com/favicons/apple-touch-icon.png",url:"usepanda.com",title:"Data Source (API)",description:"Panda is freely available news reader when you can discover the best tools, resources and inspiration in the world of design and tech."},{logo:"https://ionicframework.com/img/meta/favicon-192x192.png",url:"ionicframework.com",title:"SDK/UI-toolkit (React)",description:"Ionic Framework is an open source UI toolkit for building cross-platform apps using web technologies."}],G=function(){return l.a.createElement(m.i,{className:"about text-center"},l.a.createElement(K,{style:{height:"10vh",marginTop:"5vh"}}),l.a.createElement("div",null,l.a.createElement("blockquote",null,l.a.createElement("strong",null,"Khabar")," is a free and open-source cross-platform application for staying informed about the best tools and techniques in the world of design and technology developed by"," ",l.a.createElement(m.c,{className:"inline-button",fill:"clear",onClick:L("https://himalay.com.np")},"Himalay Sunuwar"),".")),l.a.createElement(m.q,{style:{marginTop:"5vh"}},B.map((function(e){var t=e.logo,n=e.url,a=e.title,r=e.description;return l.a.createElement(m.o,{key:a,detail:!1,button:!0,onClick:L("https://".concat(n))},l.a.createElement(m.b,{slot:"start"},t?l.a.createElement("img",{alt:a,src:t}):l.a.createElement(K,null)),l.a.createElement(m.p,null,l.a.createElement("h2",null,n),l.a.createElement("h3",null,a),l.a.createElement("p",null,r)))}))))},q=function(){var e=Object(c.useRef)(!1);return Object(c.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},z=function(e){var t=e.history,n=q(),a=O("theme"),r=Object(h.a)(a,1)[0],o=O("selectedFeeds"),i=Object(h.a)(o,1)[0],s=O("feedOrder"),u=Object(h.a)(s,1)[0],f=Object(c.useState)(),p=Object(h.a)(f,2),g=p[0],E=p[1],v=Object(c.useState)({open:!1,event:void 0}),j=Object(h.a)(v,2),k=j[0],C=j[1],S=Object(c.useState)(!1),N=Object(h.a)(S,2),_=N[0],I=N[1],F=function(e){return function(){var t=u.indexOf(g)+e;t>=0&&t<u.length&&E(u[t])}},R=function(){return n.current&&C({open:!1,event:void 0})},D=function(e){return function(){R(),t.replace(e)}};return Object(c.useEffect)((function(){if(u.length)if(u.length)g||E(u[0]);else{var e=Object.keys(i);w("feedOrder",e)}else t.replace("/feeds")}),[u,i,t,g]),l.a.createElement(m.a,null,l.a.createElement(m.m,null,l.a.createElement(m.I,null,l.a.createElement(m.d,{slot:"start"},l.a.createElement(m.n,{title:"Khabar",slot:"icon-only",src:x.a})),l.a.createElement(m.G,null,g?i[g].title:"Khabar"),l.a.createElement(m.d,{slot:"end"},l.a.createElement(m.t,{isOpen:k.open,event:k.event,onDidDismiss:R},l.a.createElement(m.o,{detail:!1},l.a.createElement(m.p,null,"Theme"),l.a.createElement(m.H,{checked:"light"===r,color:"dark"===r?"light":"dark",onIonChange:function(){R(),function(){var e=window.localStorage.theme||"dark";document.body.classList.remove(e),e="dark"===e?"light":"dark",document.body.classList.add(e),y("theme",e),window.localStorage.theme=e}()}})),l.a.createElement(m.o,{detail:!1,button:!0,onClick:D("/feeds")},l.a.createElement(m.p,null,"Feed"),l.a.createElement(m.n,{title:"Feed",md:b.a,ios:b.b,slot:"end"})),l.a.createElement(m.o,{detail:!1,button:!0,onClick:D("/reorder")},l.a.createElement(m.p,null,"Reorder"),l.a.createElement(m.n,{title:"Reorder",md:b.s,ios:b.r,slot:"end"})),l.a.createElement(m.o,{detail:!1,button:!0,onClick:function(){R(),I(!0)}},l.a.createElement(m.p,null,"About"),l.a.createElement(m.n,{title:"Reorder",icon:b.n,slot:"end"}))),l.a.createElement(m.c,{onClick:function(e){return C({open:!0,event:e.nativeEvent})},slot:"end"},l.a.createElement(m.n,{slot:"icon-only",ios:b.l,md:b.m}))))),l.a.createElement(A,{index:u.indexOf(g),onIndexChange:function(e){return E(u[e])}}),Object(d.e)("desktop")&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m.j,{vertical:"center",horizontal:"start",slot:"fixed",hidden:0===u.indexOf(g)},l.a.createElement(m.k,{size:"small",translucent:!0,onClick:F(-1)},l.a.createElement(m.n,{icon:b.g}))),l.a.createElement(m.j,{vertical:"center",horizontal:"end",slot:"fixed",hidden:u.indexOf(g)===u.length-1},l.a.createElement(m.k,{size:"small",translucent:!0,onClick:F(1)},l.a.createElement(m.n,{icon:b.h})))),l.a.createElement(m.l,null,l.a.createElement(m.B,{scrollable:!0,value:g,onIonChange:function(e){return E(e.detail.value)}},u.map((function(e,t){var n=i[e];return l.a.createElement(m.C,{key:e,value:e,"data-index":""+t,title:n.title},l.a.createElement("img",{alt:n.title,src:n.icon}))})))),l.a.createElement(m.r,{isOpen:_,swipeToClose:!0,onDidDismiss:function(){return I(!1)}},l.a.createElement(m.m,null,l.a.createElement(m.I,null,l.a.createElement(m.d,{slot:"start"},l.a.createElement(m.n,{title:"Khabar",slot:"icon-only",src:x.a})),l.a.createElement(m.G,null,"About"),l.a.createElement(m.d,{slot:"end"},l.a.createElement(m.c,{onClick:function(){return I(!1)}},"Close")))),l.a.createElement(G,null)))},M=n(15),H=n(122),J=n(123),$=n.n(J),V={minMatchCharLength:2,threshold:.4,keys:["title","description","categories"]},Y=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.usepanda.com/v4/feeds/query?category=".concat(t.split("$").pop(),"&limit=100&page=1"));case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.history,n=O("feeds"),a=Object(h.a)(n,1)[0],i=O("selectedFeeds"),s=Object(h.a)(i,1)[0],u=O("feedOrder"),d=Object(h.a)(u,1)[0],f=O("tags"),p=Object(h.a)(f,1)[0],b=Object(c.useState)(!1),g=Object(h.a)(b,2),E=g[0],v=g[1],j=Object(c.useState)(""),y=Object(h.a)(j,2),k=y[0],C=y[1],N=Object(c.useState)("source-category$featured"),_=Object(h.a)(N,2),I=_[0],F=_[1],R=Object(c.useState)([]),A=Object(h.a)(R,2),D=A[0],T=A[1],U=Object(c.useState)(""),P=Object(h.a)(U,2),W=P[0],K=P[1],L=Object(c.useState)([]),B=Object(h.a)(L,2),G=B[0],q=B[1],z=Object(c.useRef)(null),J=new H.a(a,V),Q=Object(c.useCallback)((function(e,t){v(!0),q((t||a).filter((function(t){return t.categories.includes(e)}))),v(!1)}),[a]),X=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(c.length>0&&void 0!==c[0])||c[0],e.prev=1,v(t),e.next=5,fetch("https://api.usepanda.com/v1/tags");case 5:return e.next=7,e.sent.json();case 7:return a=e.sent,e.next=10,Promise.all(a.reduce((function(e,t){var n=t._id,a=t.children;return a.length?e=e.concat(a.map((function(e){return Y(e._id)}))):e.push(Y(n)),e}),[]));case 10:o=e.sent,w("feeds",$()((n=[]).concat.apply(n,Object(M.a)(o)),"id")),w("tags",a),v(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),Z=function(e,t){return function(){F(e),T(t),K(t.length?t[0]._id:""),Q(t.length?t[0]._id:e)}},ee=function(e){return function(){K(e),Q(e)}},te=function(e){if(e.detail&&e.detail.value){var t=e.detail.value;C(t),q(J.search(t).map((function(e){return e.item})))}else C(""),Q(W||I)},ne=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(!1);case 2:t.detail.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){a.length&&p.length?G.length||Q(I):X().then((function(){return console.log("Feeds fetched")})).catch(console.error)}),[a,p,I,Q,G]);var ae=Object.keys(s);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.m,null,l.a.createElement(m.I,null,l.a.createElement(m.d,{slot:"start"},l.a.createElement(m.n,{title:"Khabar",slot:"icon-only",src:x.a})),l.a.createElement(m.G,null,"Khabar"),l.a.createElement(m.d,{slot:"end"},l.a.createElement(m.c,{disabled:0===Object.keys(s).length,onClick:function(){return t.replace("/")}},"Done")))),l.a.createElement(m.i,{className:"feed-content",ref:z},l.a.createElement(m.A,{value:k,placeholder:"Type website name or topic",onIonChange:te,onIonCancel:te}),l.a.createElement(m.u,{slot:"fixed",onIonRefresh:ne},l.a.createElement(m.v,{refreshingSpinner:"dots"})),E&&l.a.createElement(m.F,{className:"w-100",name:"dots",duration:30}),""===k&&l.a.createElement("div",{className:"text-center"},p.map((function(e,t){var n=e._id,a=e.displayName,r=e.children;return l.a.createElement(m.h,Object.assign({key:n},I===n?{color:"secondary",outline:!0}:{},{onClick:Z(n,r)}),l.a.createElement(m.p,null,a))})),D.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Be more specific"),D.map((function(e){var t=e._id,n=e.displayName;return l.a.createElement(m.h,Object.assign({key:t,className:"sub-tag"},W===t?{color:"secondary",outline:!0}:{},{onClick:ee(t)}),l.a.createElement(m.p,null,n))})))),G.map((function(e){return l.a.createElement(m.o,{detail:!1,key:e.id,className:"w-100"},l.a.createElement(m.b,{slot:"start"},l.a.createElement("img",{alt:e.title,src:e.icon})),l.a.createElement(m.p,{className:"ion-text-wrap"},l.a.createElement("h3",null,e.title),l.a.createElement("p",null,e.description)),l.a.createElement(m.H,{slot:"end",checked:ae.includes(e.id),onIonChange:(t=e,Object(o.a)(r.a.mark((function e(){var n,a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,(a=S()(s))[n]?(delete a[n],o=Object(M.a)(d),(c=o.indexOf(n))>-1&&(o.splice(c,1),w("feedOrder",o))):(a[n]=t,w("feedOrder",Object(M.a)(new Set([].concat(Object(M.a)(d),[n]))))),w("selectedFeeds",a),a[n]&&fetch("https://api.usepanda.com/v4/articles?feeds=".concat(n,"&limit=30&page=1&sort=latest")).then((function(e){return e.json()})).then((function(e){var t=S()(a);t[n].data=e,t[n].updatedAt=Date.now(),w("selectedFeeds",t)})).catch(console.error);case 5:case"end":return e.stop()}}),e)}))))}));var t}))))},X=function(e){var t=e.history,n=O("selectedFeeds"),a=Object(h.a)(n,1)[0],i=O("feedOrder"),s=Object(h.a)(i,1)[0],u=function(e){return w("feedOrder",e)},d=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.detail){e.next=2;break}return e.abrupt("return");case 2:if(t.detail.from!==t.detail.to){e.next=4;break}return e.abrupt("return");case 4:(n=S()(s)).splice.apply(n,[t.detail.to,0].concat(Object(M.a)(n.splice(t.detail.from,1)))),u(n),t.detail.complete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(!s.length){var e=Object.keys(a);u(e)}}),[a,s]),l.a.createElement(m.a,null,l.a.createElement(m.m,null,l.a.createElement(m.I,null,l.a.createElement(m.d,{slot:"start"},l.a.createElement(m.n,{title:"Khabar",slot:"icon-only",src:x.a})),l.a.createElement(m.G,null,"Reorder"),l.a.createElement(m.d,{slot:"end"},l.a.createElement(m.c,{onClick:function(){return t.replace("/")}},"Done")))),l.a.createElement(m.i,{className:"feed-content"},l.a.createElement(m.x,{disabled:!1,onIonItemReorder:d},s.map((function(e){return l.a.createElement(m.o,{detail:!1,key:e},l.a.createElement(m.b,{slot:"start"},l.a.createElement("img",{style:{height:"2em",borderRadius:"1em"},alt:a[e].title,src:a[e].icon})),l.a.createElement(m.p,{className:"ion-text-wrap"},l.a.createElement("h3",null,a[e].title),l.a.createElement("p",null,a[e].description)),l.a.createElement(m.w,{slot:"end"}))})))))},Z=(n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),function(){return l.a.createElement(m.a,null,l.a.createElement(p.a,null,l.a.createElement(m.s,{id:"main"},l.a.createElement(m.z,{id:"main"},l.a.createElement(f.b,{path:"/feeds",component:Q,exact:!0}),l.a.createElement(f.b,{path:"/reorder",component:X,exact:!0}),l.a.createElement(f.b,{path:"/",component:z,exact:!0}),l.a.createElement(f.b,{component:z}),l.a.createElement(f.a,{to:"/"})))))}),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),te=["storage.googleapis.com","usepanda.com/img","www.google.com/s2/favicons","url2png.producthunt.com","images.unsplash.com","inspgr.id/app/uploads","wp-content/uploads"];function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(self.addEventListener("fetch",function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new RegExp(te.join("|"),"gi").test(t.request.url)&&t.respondWith(caches.match(t.request).then((function(e){return e||fetch(t.request)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ae=window.localStorage.theme||"dark";document.body.classList.add(ae),u.a.App.addListener("backButton",Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 2:t=e.sent,t.value&&u.a.App.exitApp();case 5:case"end":return e.stop()}}),e)})))),s.a.render(l.a.createElement(Z,null),document.getElementById("root")),Object(d.e)("capacitor")||function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker.\n            To learn more, visit http://bit.ly/CRA-PWA")})).catch(console.error)):ne(t,e)}))}}()},31:function(e,t,n){e.exports=n.p+"static/media/logo.ed5d5347.svg"}},[[128,3,4]]]);
//# sourceMappingURL=main.bd315535.chunk.js.map