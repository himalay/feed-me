(this.webpackJsonpKhabar=this.webpackJsonpKhabar||[]).push([[1],{128:function(e,t,n){e.exports=n(269)},133:function(e,t,n){var a={"./ion-action-sheet.entry.js":[271,5],"./ion-alert.entry.js":[272,6],"./ion-app_8.entry.js":[273,7],"./ion-avatar_3.entry.js":[274,18],"./ion-back-button.entry.js":[275,19],"./ion-backdrop.entry.js":[276,43],"./ion-button_2.entry.js":[277,20],"./ion-card_5.entry.js":[278,21],"./ion-checkbox.entry.js":[279,22],"./ion-chip.entry.js":[280,23],"./ion-col_3.entry.js":[281,44],"./ion-datetime_3.entry.js":[282,10],"./ion-fab_3.entry.js":[283,24],"./ion-img.entry.js":[284,45],"./ion-infinite-scroll_2.entry.js":[285,46],"./ion-input.entry.js":[286,25],"./ion-item-option_3.entry.js":[287,26],"./ion-item_8.entry.js":[288,27],"./ion-loading.entry.js":[289,28],"./ion-menu_3.entry.js":[290,29],"./ion-modal.entry.js":[291,8],"./ion-nav_2.entry.js":[292,15],"./ion-popover.entry.js":[293,9],"./ion-progress-bar.entry.js":[294,30],"./ion-radio_2.entry.js":[295,31],"./ion-range.entry.js":[296,32],"./ion-refresher_2.entry.js":[297,11],"./ion-reorder_2.entry.js":[298,17],"./ion-ripple-effect.entry.js":[299,47],"./ion-route_4.entry.js":[300,33],"./ion-searchbar.entry.js":[301,34],"./ion-segment_2.entry.js":[302,35],"./ion-select_3.entry.js":[303,36],"./ion-slide_2.entry.js":[304,48],"./ion-spinner.entry.js":[305,13],"./ion-split-pane.entry.js":[306,49],"./ion-tab-bar_2.entry.js":[307,37],"./ion-tab_2.entry.js":[308,16],"./ion-text.entry.js":[309,38],"./ion-textarea.entry.js":[310,39],"./ion-toast.entry.js":[311,40],"./ion-toggle.entry.js":[312,12],"./ion-virtual-scroll.entry.js":[313,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=133,e.exports=r},155:function(e,t,n){var a={"./ion-icon.entry.js":[317,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=155,e.exports=r},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),o=n.n(c),l=n(14),i=n(2),s=n(35),u=n(126),m=n(15),d=n(10),f=n(3),p=n.n(f),h=n(13),b=n(12),E=n(30),g=n.n(E),v=n(16),y=n(120),j=Object(v.a)({isOffline:!1,theme:"dark",feeds:[],tags:[],selectedFeeds:{},feedOrder:[]},Object.entries(localStorage).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];try{e[a]=JSON.parse(r)}catch(c){e[a]=r}return e}),{})),O=Object(y.a)(j),w=O.setGlobalState,k=O.useGlobalState,x=function(e,t){w(e,t);try{window.localStorage[e]=JSON.stringify(t)}catch(n){window.localStorage[e]=t}};window.addEventListener("online",(function(){return x("isOffline",!1)})),window.addEventListener("offline",(function(){return x("isOffline",!0)}));var N=n(31),S=n.n(N),C=n(56);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var F=r.a.createElement("path",{d:"M20.09 30.42l-6.1 3.53v18.87l58.8 33.95V60.85z",fill:"#ef8769"}),R=r.a.createElement("path",{d:"M72.79 0l-58.8 33.95v18.87l6.1 3.53 52.7-30.43z",fill:"#f4b691"}),I=function(e){var t=e.svgRef,n=e.title,a=D(e,["svgRef","title"]);return r.a.createElement("svg",_({viewBox:"0 0 86.77 86.77",ref:t},a),n?r.a.createElement("title",null,n):null,F,R)},A=r.a.forwardRef((function(e,t){return r.a.createElement(I,_({svgRef:t},e))})),U=(n.p,function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))}),P=[{url:"khabar.github.io",title:"Progressive Web App",description:r.a.createElement(r.a.Fragment,null,"The Web-app/PWA version of ",r.a.createElement("strong",null,"Khabar")," app is also available and powered by GitHub Pages.")},{logo:b.p,url:"github.com/khabar",title:"Source Code",description:"The complete source of this application is available in GitHub."},{logo:"https://usepanda.com/favicons/apple-touch-icon.png",url:"usepanda.com",title:"Data Source (API)",description:"Panda is freely available news reader when you can discover the best tools, resources and inspiration in the world of design and tech."},{logo:"https://ionicframework.com/img/meta/favicon-192x192.png",url:"ionicframework.com",title:"SDK/UI-toolkit (React)",description:"Ionic Framework is an open source UI toolkit for building cross-platform apps using web technologies."}],T=function(){return r.a.createElement(i.i,{className:"about text-center"},r.a.createElement(A,{style:{height:"10vh",marginTop:"5vh"}}),r.a.createElement("div",null,r.a.createElement("blockquote",null,r.a.createElement("strong",null,"Khabar")," is a free and open-source cross-platform application for staying informed about the best tools and techniques in the world of design and technology developed by"," ",r.a.createElement(i.c,{className:"inline-button",fill:"clear",onClick:U("https://himalay.com.np")},"Himalay Sunuwar"),".")),r.a.createElement(i.q,{style:{marginTop:"5vh"}},P.map((function(e){var t=e.logo,n=e.url,a=e.title,c=e.description;return r.a.createElement(i.o,{key:a,detail:!1,button:!0,onClick:U("https://".concat(n))},r.a.createElement(i.b,{slot:"start"},t?r.a.createElement("img",{alt:a,src:t}):r.a.createElement(A,null)),r.a.createElement(i.p,null,r.a.createElement("h2",null,n),r.a.createElement("h3",null,a),r.a.createElement("p",null,c)))}))))},L=function(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),n=0;if(t<2)return"a moment ago";if(t<5)return"moments ago";if(t<60)return t+" seconds ago";if(t<120)return"a minute ago";if(t<3600){for(;t>=60;)t-=60,n+=1;return n+" minutes ago"}if(t<7200)return"an hour ago";if(t<86400){for(;t>=3600;)t-=3600,n+=1;return n+" hours ago"}if(t<172800)return"a day ago";if(t<604800){for(;t>=172800;)t-=172800,n+=1;return n+" days ago"}if(t<1209600)return"a week ago";if(t<2592e3){for(;t>=604800;)t-=604800,n+=1;return n+" weeks ago"}if(t<5184e3)return"a month ago";if(t<31536e3){for(;t>=2592e3;)t-=2592e3,n+=1;return n+" months ago"}return t<141912e4?"more than year ago":"never"},W=function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))},K=function(e){var t=e.article;return t._id?r.a.createElement(i.e,null,t.image.normal?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"img-btn",onClick:W(t.source.targetUrl)},r.a.createElement("img",{className:"card-img",alt:t.title||t.source.authorName||"x",src:t.image.normal})),r.a.createElement(i.p,{className:"item-text text-left"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description))):r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,button:!0,onClick:W(t.source.targetUrl),lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement("img",{alt:t.source.name,src:"https://www.google.com/s2/favicons?domain=".concat(t.source.targetUrl)})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description)))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement("a",{className:"sub-link",href:t.source.sourceUrl,target:"_system",rel:"noopener noreferrer"},t.source.likesCount,r.a.createElement(i.n,{title:"Up-votes",icon:b.e,className:"up-arrow"}),t.source.commentsCount,r.a.createElement(i.n,{title:"Comments",style:{marginLeft:".15em"},icon:b.f}))," ".concat(L(t.source.createdAt)," by "),r.a.createElement("a",{className:"sub-link",href:["reddit","redditprogramming"].includes("segment")?"https://reddit.com/u/".concat(t.source.username):t.source.authorUrl,target:"_system",rel:"noopener noreferrer"},t.source.authorName||t.source.username))):r.a.createElement(i.e,null,r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,r.a.createElement(i.D,{animated:!0,style:{width:"50%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"95%"}}))))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement(i.D,{animated:!0,style:{width:"40%"}})))},M=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},B=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=500,e.prev=1,e.next=4,fetch("https://api.usepanda.com");case 4:a=e.sent.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(200!==a){e.next=18;break}return x("isOffline",!1),e.next=13,fetch("https://api.usepanda.com"+t,n);case 13:if(!(r=e.sent).ok){e.next=16;break}return e.abrupt("return",r.json());case 16:e.next=19;break;case 18:x("isOffline",!0);case 19:throw new Error("We encountered and error while trying to connect to the server.");case 20:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("/v4/articles?feeds=".concat(t,"&limit=30&page=1&sort=latest")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=window.innerWidth,H=function(e){var t=e.history,n=M(),c=k("theme"),o=Object(d.a)(c,1)[0],s=k("selectedFeeds"),u=Object(d.a)(s,1)[0],f=k("feedOrder"),E=Object(d.a)(f,1)[0],v=k("isOffline"),y=Object(d.a)(v,1)[0],j=Object(a.useState)(!1),O=Object(d.a)(j,2),N=O[0],C=O[1],_=Object(a.useState)(""),D=Object(d.a)(_,2),F=D[0],R=D[1],I=Object(a.useState)({open:!1,event:void 0}),A=Object(d.a)(I,2),U=A[0],P=A[1],L=Object(a.useState)(!1),W=Object(d.a)(L,2),B=W[0],H=W[1],q=Object(a.useState)(0),J=Object(d.a)(q,2),$=J[0],X=J[1],V=Object(a.useState)(!1),Q=Object(d.a)(V,2),Y=Q[0],Z=Q[1],ee=Object(a.useState)(""),te=Object(d.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useRef)(null),ce=Object(a.useRef)(null),oe=function(e){return x("selectedFeeds",e)},le=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],C(n),e.prev=2,a=g()(u),e.next=6,G(t);case 6:r=e.sent,a[t].data=r,a[t].updatedAt=Date.now(),oe(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),ae(e.t0.message);case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[u]),ie=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=u[t])&&Date.now()-(+n.updatedAt||0)>36e5)){e.next=5;break}return console.log("Fetching feed data for: "+n.title),e.next=5,le(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,le]),se=Object(a.useCallback)((function(e){return function(){var t=E.indexOf(F)+e;t>=0&&t<E.length&&R(E[t])}}),[F,E]),ue=function(){return n.current&&P({open:!1,event:void 0})},me=function(){return H(!1)},de=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=3;break}return e.next=3,le(F,!1);case 3:t.detail.complete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){return function(){ue(),t.replace(e)}},pe=function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=re.current)||void 0===n?void 0:n.getScrollElement();case 2:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===t;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=t.scrollTop;case 11:if(e.t0=e.t3,e.t0){e.next=14;break}e.t0=0;case 14:a=e.t0,$-a<50?Y||(null===(r=ce.current)||void 0===r||r.classList.add("hide-footer"),Z(!0)):Y&&(null===(c=ce.current)||void 0===c||c.classList.remove("hide-footer"),Z(!1)),X(a);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e;if(!E.length)return t.replace("/feeds");if(!E.length){var n=Object.keys(u);x("feedOrder",n)}if(F)ie(F).then(console.log).catch(console.error);else{var a=E[0];R(a),ie(a).then(console.log).catch(console.error)}return re.current&&(e=Object(i.P)({el:re.current,gestureName:"swipe-gesture",onMove:function(e){e.deltaX>z/2?se(-1)():e.deltaX<-z/2&&se(1)()}})).enable(),function(){var t;null===(t=e)||void 0===t||t.destroy()}}),[E,u,t,F,ie,se]);var he=F&&u[F].data||[];return r.a.createElement(i.a,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,F?u[F].title:"Khabar"),r.a.createElement(i.d,{slot:"end"},y&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.t,{isOpen:U.open,event:U.event,onDidDismiss:ue},r.a.createElement(i.o,{detail:!1},r.a.createElement(i.p,null,"Theme"),r.a.createElement(i.H,{checked:"light"===o,color:"dark"===o?"light":"dark",onIonChange:function(){ue(),function(){var e=window.localStorage.theme||"dark";document.body.classList.remove(e),e="dark"===e?"light":"dark",document.body.classList.add(e),w("theme",e),window.localStorage.theme=e}()}})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:fe("/feeds")},r.a.createElement(i.p,null,"Feeds"),r.a.createElement(i.n,{title:"Feed",md:b.a,ios:b.b,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:fe("/reorder")},r.a.createElement(i.p,null,"Reorder"),r.a.createElement(i.n,{title:"Reorder",md:b.t,ios:b.s,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:function(){ue(),H(!0)}},r.a.createElement(i.p,null,"About"),r.a.createElement(i.n,{title:"Reorder",icon:b.o,slot:"end"}))),r.a.createElement(i.c,{onClick:function(e){return P({open:!0,event:e.nativeEvent})},slot:"end"},r.a.createElement(i.n,{slot:"icon-only",ios:b.m,md:b.n}))))),r.a.createElement(i.i,{ref:re,className:"article-content",scrollEvents:!0,onIonScrollEnd:pe},r.a.createElement(i.u,{slot:"fixed",onIonRefresh:de},r.a.createElement(i.v,{refreshingSpinner:"dots"})),(!F||N)&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),he.length?he.map((function(e){return r.a.createElement(K,{key:e._id,article:e})})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(K,{key:"card"+t,article:{}})})),r.a.createElement(i.G,{isOpen:""!==ne,color:"danger",duration:15e3,onDidDismiss:function(){return ae("")},message:ne,buttons:[{text:"Retry",handler:function(){le(F).then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})),Object(l.f)("desktop")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.j,{vertical:"center",horizontal:"start",slot:"fixed",hidden:0===E.indexOf(F)},r.a.createElement(i.k,{translucent:!0,onClick:se(-1)},r.a.createElement(i.n,{icon:b.g}))),r.a.createElement(i.j,{vertical:"center",horizontal:"end",slot:"fixed",hidden:E.indexOf(F)===E.length-1},r.a.createElement(i.k,{translucent:!0,onClick:se(1)},r.a.createElement(i.n,{icon:b.h})))),r.a.createElement(i.l,null,r.a.createElement(i.B,{ref:ce,className:"footer",scrollable:!0,value:F,onIonChange:function(e){return R(e.detail.value)}},E.map((function(e,t){var n=u[e];return r.a.createElement(i.C,{key:"segmentBtn"+e,value:e,"data-index":""+t,title:n.title},r.a.createElement("img",{alt:n.title,src:n.icon}))})))),r.a.createElement(i.r,{isOpen:B,swipeToClose:!0,onDidDismiss:me},r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"About"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{onClick:me},"Close")))),r.a.createElement(T,null)))},q=n(122),J=n(123),$=n.n(J),X={minMatchCharLength:2,threshold:.4,keys:["title","description","categories"]},V=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("/v4/feeds/query?category=".concat(t.split("$").pop(),"&limit=100&page=1")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.history,n=k("feeds"),c=Object(d.a)(n,1)[0],o=k("selectedFeeds"),l=Object(d.a)(o,1)[0],s=k("feedOrder"),u=Object(d.a)(s,1)[0],f=k("tags"),E=Object(d.a)(f,1)[0],v=k("isOffline"),y=Object(d.a)(v,1)[0],j=Object(a.useState)(!1),O=Object(d.a)(j,2),w=O[0],N=O[1],C=Object(a.useState)(""),_=Object(d.a)(C,2),D=_[0],F=_[1],R=Object(a.useState)("source-category$featured"),I=Object(d.a)(R,2),A=I[0],U=I[1],P=Object(a.useState)([]),T=Object(d.a)(P,2),L=T[0],W=T[1],K=Object(a.useState)(""),M=Object(d.a)(K,2),G=M[0],z=M[1],H=Object(a.useState)([]),J=Object(d.a)(H,2),Q=J[0],Y=J[1],Z=Object(a.useState)(""),ee=Object(d.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useRef)(null),re=new q.a(c,X),ce=Object(a.useCallback)((function(e,t){N(!0),Y((t||c).filter((function(t){return t.categories.includes(e)}))),N(!1)}),[c]),oe=function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,a,r,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(c.length>0&&void 0!==c[0])||c[0],N(t),e.prev=2,e.next=5,B("/v1/tags");case 5:return a=e.sent,e.next=8,Promise.all(a.reduce((function(e,t){var n=t._id,a=t.children;return a.length?e=e.concat(a.map((function(e){return V(e._id)}))):e.push(V(n)),e}),[]));case 8:r=e.sent,x("feeds",$()((n=[]).concat.apply(n,Object(m.a)(r)),"id")),x("tags",a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),ne(e.t0.message);case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),le=function(e,t){return function(){U(e),W(t),z(t.length?t[0]._id:""),ce(t.length?t[0]._id:e)}},ie=function(e){return function(){z(e),ce(e)}},se=function(e){if(e.detail&&e.detail.value){var t=e.detail.value;F(t),Y(re.search(t).map((function(e){return e.item})))}else F(""),ce(G||A)},ue=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(!1);case 2:t.detail.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){c.length&&E.length?Q.length||ce(A):oe().then((function(){return console.log("Feeds fetched")})).catch(console.error)}),[c,E,A,ce,Q]);var me=Object.keys(l);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"Feeds"),r.a.createElement(i.d,{slot:"end"},y&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.c,{disabled:0===Object.keys(l).length,onClick:function(){return t.replace("/")}},"Done")))),r.a.createElement(i.i,{className:"feed-content",ref:ae},r.a.createElement(i.A,{value:D,placeholder:"Type website name or topic",onIonChange:se,onIonCancel:se}),r.a.createElement(i.u,{slot:"fixed",onIonRefresh:ue},r.a.createElement(i.v,{refreshingSpinner:"dots"})),w&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),""===D&&r.a.createElement("div",{className:"text-center"},E.length?E.map((function(e,t){var n=e._id,a=e.displayName,c=e.children;return r.a.createElement(i.h,Object.assign({key:n},A===n?{color:"secondary",outline:!0}:{},{onClick:le(n,c)}),r.a.createElement(i.p,null,a))})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.h,{key:"chips"+t},r.a.createElement(i.D,{animated:!0,style:{width:Math.floor(Math.random()*(t+30))+20+"px"}}))})),L.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Be more specific"),L.map((function(e){var t=e._id,n=e.displayName;return r.a.createElement(i.h,Object.assign({key:t,className:"sub-tag"},G===t?{color:"secondary",outline:!0}:{},{onClick:ie(t)}),r.a.createElement(i.p,null,n))})))),Q.length?Q.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e.id,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:e.title,src:e.icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description)),r.a.createElement(i.H,{slot:"end",checked:me.includes(e.id),onIonChange:(t=e,Object(h.a)(p.a.mark((function e(){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,(a=g()(l))[n]?(delete a[n],r=Object(m.a)(u),(c=r.indexOf(n))>-1&&(r.splice(c,1),x("feedOrder",r))):(a[n]=t,x("feedOrder",Object(m.a)(new Set([].concat(Object(m.a)(u),[n]))))),x("selectedFeeds",a),a[n]&&B("/v4/articles?feeds=".concat(n,"&limit=30&page=1&sort=latest")).then((function(e){var t=g()(a);t[n].data=e,t[n].updatedAt=Date.now(),x("selectedFeeds",t)})).catch(console.error);case 5:case"end":return e.stop()}}),e)}))))}));var t})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.o,{key:"skeleton"+t,detail:!1,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,r.a.createElement(i.D,{animated:!0,style:{width:"45%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"85%"}}))),r.a.createElement(i.D,{slot:"end",animated:!0,style:{width:"10%"}}))})),r.a.createElement(i.G,{isOpen:""!==te,color:"danger",duration:15e3,onDidDismiss:function(){return ne("")},message:te,buttons:[{text:"Retry",handler:function(){oe().then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})))},Y=function(e){var t=e.history,n=k("selectedFeeds"),c=Object(d.a)(n,1)[0],o=k("feedOrder"),l=Object(d.a)(o,1)[0],s=function(e){return x("feedOrder",e)},u=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.detail){e.next=2;break}return e.abrupt("return");case 2:if(t.detail.from!==t.detail.to){e.next=4;break}return e.abrupt("return");case 4:(n=g()(l)).splice.apply(n,[t.detail.to,0].concat(Object(m.a)(n.splice(t.detail.from,1)))),s(n),t.detail.complete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(!l.length){var e=Object.keys(c);s(e)}}),[c,l]),r.a.createElement(i.a,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"Reorder"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{onClick:function(){return t.replace("/")}},"Done")))),r.a.createElement(i.i,{className:"feed-content"},r.a.createElement(i.x,{disabled:!1,onIonItemReorder:u},l.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:c[e].title,src:c[e].icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,c[e].title),r.a.createElement("p",null,c[e].description)),r.a.createElement(i.w,{slot:"end"}))})))))},Z=(n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(i.s,{id:"main"},r.a.createElement(i.z,{id:"main"},r.a.createElement(s.b,{path:"/feeds",component:Q,exact:!0}),r.a.createElement(s.b,{path:"/reorder",component:Y,exact:!0}),r.a.createElement(s.b,{path:"/",component:H,exact:!0}),r.a.createElement(s.b,{component:H}),r.a.createElement(s.a,{to:"/"})))))}),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ne=window.localStorage.theme||"dark";document.body.classList.add(ne),o.a.render(r.a.createElement(Z,null),document.getElementById("root")),Object(l.f)("capacitor")||function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!==a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister()})).then((function(){window.location.reload()})).catch(console.error):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})).catch(console.error)):te(t,e)}))}}()},31:function(e,t,n){e.exports=n.p+"static/media/logo.ed5d5347.svg"}},[[128,3,4]]]);
//# sourceMappingURL=main.415f255d.chunk.js.map