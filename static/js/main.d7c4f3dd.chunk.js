(this.webpackJsonpKhabar=this.webpackJsonpKhabar||[]).push([[1],{128:function(e,t,n){e.exports=n(269)},133:function(e,t,n){var a={"./ion-action-sheet.entry.js":[271,5],"./ion-alert.entry.js":[272,6],"./ion-app_8.entry.js":[273,7],"./ion-avatar_3.entry.js":[274,18],"./ion-back-button.entry.js":[275,19],"./ion-backdrop.entry.js":[276,43],"./ion-button_2.entry.js":[277,20],"./ion-card_5.entry.js":[278,21],"./ion-checkbox.entry.js":[279,22],"./ion-chip.entry.js":[280,23],"./ion-col_3.entry.js":[281,44],"./ion-datetime_3.entry.js":[282,10],"./ion-fab_3.entry.js":[283,24],"./ion-img.entry.js":[284,45],"./ion-infinite-scroll_2.entry.js":[285,46],"./ion-input.entry.js":[286,25],"./ion-item-option_3.entry.js":[287,26],"./ion-item_8.entry.js":[288,27],"./ion-loading.entry.js":[289,28],"./ion-menu_3.entry.js":[290,29],"./ion-modal.entry.js":[291,8],"./ion-nav_2.entry.js":[292,15],"./ion-popover.entry.js":[293,9],"./ion-progress-bar.entry.js":[294,30],"./ion-radio_2.entry.js":[295,31],"./ion-range.entry.js":[296,32],"./ion-refresher_2.entry.js":[297,11],"./ion-reorder_2.entry.js":[298,17],"./ion-ripple-effect.entry.js":[299,47],"./ion-route_4.entry.js":[300,33],"./ion-searchbar.entry.js":[301,34],"./ion-segment_2.entry.js":[302,35],"./ion-select_3.entry.js":[303,36],"./ion-slide_2.entry.js":[304,48],"./ion-spinner.entry.js":[305,13],"./ion-split-pane.entry.js":[306,49],"./ion-tab-bar_2.entry.js":[307,37],"./ion-tab_2.entry.js":[308,16],"./ion-text.entry.js":[309,38],"./ion-textarea.entry.js":[310,39],"./ion-toast.entry.js":[311,40],"./ion-toggle.entry.js":[312,12],"./ion-virtual-scroll.entry.js":[313,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=133,e.exports=r},155:function(e,t,n){var a={"./ion-icon.entry.js":[317,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=155,e.exports=r},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),l=n(14),i=n(2),s=n(36),u=n(126),m=n(15),d=n(10),f=n(3),p=n.n(f),h=n(12),b=n(13),E=n(35),g=n.n(E),v=n(18),y=n(16),j=n(121),O=Object(y.a)({isOffline:!1,theme:"dark",feeds:[],tags:[],selectedFeeds:{},feedOrder:[]},Object.entries(localStorage).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];try{e[a]=JSON.parse(r)}catch(o){e[a]=r}return e}),{})),w=Object(j.a)(O),k=w.setGlobalState,x=w.useGlobalState,N=function(e,t){k(e,t);try{window.localStorage[e]=JSON.stringify(t)}catch(n){window.localStorage[e]=t}};window.addEventListener("online",(function(){return N("isOffline",!1)})),window.addEventListener("offline",(function(){return N("isOffline",!0)}));var _=n(31),S=n.n(_);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var D=r.a.createElement("path",{d:"M20.09 30.42l-6.1 3.53v18.87l58.8 33.95V60.85z",fill:"#ef8769"}),F=r.a.createElement("path",{d:"M72.79 0l-58.8 33.95v18.87l6.1 3.53 52.7-30.43z",fill:"#f4b691"}),L=function(e){var t=e.svgRef,n=e.title,a=A(e,["svgRef","title"]);return r.a.createElement("svg",C({viewBox:"0 0 86.77 86.77",ref:t},a),n?r.a.createElement("title",null,n):null,D,F)},R=r.a.forwardRef((function(e,t){return r.a.createElement(L,C({svgRef:t},e))})),I=(n.p,function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))}),P=[{url:"khabar.github.io",title:"Progressive Web App",description:r.a.createElement(r.a.Fragment,null,"The Web-app/PWA version of ",r.a.createElement("strong",null,"Khabar")," app is also available and powered by GitHub Pages.")},{logo:b.p,url:"github.com/khabar",title:"Source Code",description:"The complete source of this application is available in GitHub."},{logo:"https://usepanda.com/favicons/apple-touch-icon.png",url:"usepanda.com",title:"Data Source (API)",description:"Panda is freely available news reader where you can discover the best tools, resources and inspiration in the world of design and tech."},{logo:"https://ionicframework.com/img/meta/favicon-192x192.png",url:"ionicframework.com",title:"SDK/UI-toolkit (React)",description:"Ionic Framework is an open source UI toolkit for building cross-platform apps using web technologies."}],T=function(){return r.a.createElement(i.i,{className:"about text-center"},r.a.createElement(R,{style:{height:"10vh",marginTop:"5vh"}}),r.a.createElement("div",null,r.a.createElement("blockquote",null,r.a.createElement("strong",null,"Khabar")," is a free and open-source cross-platform mobile-app/PWA for staying informed about the best tools and techniques in the world of design and technology, powered by ",r.a.createElement("b",null,"Panda")," and developed by"," ",r.a.createElement(i.c,{className:"inline-button",fill:"clear",onClick:I("https://himalay.com.np")},"Himalay Sunuwar"),".")),r.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=np.com.himalay.khabar",target:"_system",rel:"noopener noreferrer"},r.a.createElement("img",{style:{maxHeight:"80px"},alt:"Get it on Google Play",src:"https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"})),r.a.createElement(i.q,null,P.map((function(e){var t=e.logo,n=e.url,a=e.title,o=e.description;return r.a.createElement(i.o,{key:a,detail:!1,button:!0,onClick:I("https://".concat(n))},r.a.createElement(i.b,{slot:"start"},t?r.a.createElement("img",{alt:a,src:t}):r.a.createElement(R,null)),r.a.createElement(i.p,null,r.a.createElement("h2",null,n),r.a.createElement("h3",null,a),r.a.createElement("p",null,o)))}))))},U=function(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),n=0;if(t<2)return"a moment ago";if(t<5)return"moments ago";if(t<60)return t+" seconds ago";if(t<120)return"a minute ago";if(t<3600){for(;t>=60;)t-=60,n+=1;return n+" minutes ago"}if(t<7200)return"an hour ago";if(t<86400){for(;t>=3600;)t-=3600,n+=1;return n+" hours ago"}if(t<172800)return"a day ago";if(t<604800){for(;t>=172800;)t-=172800,n+=1;return n+" days ago"}if(t<1209600)return"a week ago";if(t<2592e3){for(;t>=604800;)t-=604800,n+=1;return n+" weeks ago"}if(t<5184e3)return"a month ago";if(t<31536e3){for(;t>=2592e3;)t-=2592e3,n+=1;return n+" months ago"}return t<141912e4?"more than year ago":"never"},B=function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))},W=function(e){var t=e.article;return t._id?r.a.createElement(i.e,null,t.image.normal?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"img-btn",onClick:B(t.source.targetUrl)},r.a.createElement("img",{className:"card-img",alt:t.title||t.source.authorName||"x",src:t.image.normal})),r.a.createElement(i.p,{className:"item-text text-left"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description))):r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,button:!0,onClick:B(t.source.targetUrl),lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement("img",{alt:t.source.name,src:"https://www.google.com/s2/favicons?domain=".concat(t.source.targetUrl)})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description)))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement("a",{className:"sub-link",href:t.source.sourceUrl,target:"_system",rel:"noopener noreferrer"},t.source.likesCount,r.a.createElement(i.n,{title:"Up-votes",icon:b.e,className:"up-arrow"}),t.source.commentsCount,r.a.createElement(i.n,{title:"Comments",style:{marginLeft:".15em"},icon:b.f}))," ".concat(U(t.source.createdAt)," by "),r.a.createElement("a",{className:"sub-link",href:["reddit","redditprogramming"].includes("segment")?"https://reddit.com/u/".concat(t.source.username):t.source.authorUrl,target:"_system",rel:"noopener noreferrer"},t.source.authorName||t.source.username))):r.a.createElement(i.e,null,r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,r.a.createElement(i.D,{animated:!0,style:{width:"50%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"95%"}}))))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement(i.D,{animated:!0,style:{width:"40%"}})))},M=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},K=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=500,e.prev=1,e.next=4,fetch("https://api.usepanda.com");case 4:a=e.sent.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(200!==a){e.next=18;break}return N("isOffline",!1),e.next=13,fetch("https://api.usepanda.com"+t,n);case 13:if(!(r=e.sent).ok){e.next=16;break}return e.abrupt("return",r.json());case 16:e.next=19;break;case 18:N("isOffline",!0);case 19:throw new Error("We encountered and error while trying to connect to the server.");case 20:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K("/v4/articles?feeds=".concat(t,"&limit=30&page=1&sort=latest")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=window.innerWidth,z=function(e){var t,n,o=e.history,c=M(),s=x("theme"),u=Object(d.a)(s,1)[0],f=x("selectedFeeds"),E=Object(d.a)(f,1)[0],y=x("feedOrder"),j=Object(d.a)(y,1)[0],O=x("isOffline"),w=Object(d.a)(O,1)[0],_=Object(a.useState)(!1),C=Object(d.a)(_,2),A=C[0],D=C[1],F=Object(a.useState)(""),L=Object(d.a)(F,2),R=L[0],I=L[1],P=Object(a.useState)({open:!1,event:void 0}),U=Object(d.a)(P,2),B=U[0],K=U[1],z=Object(a.useState)(!1),q=Object(d.a)(z,2),J=q[0],$=q[1],X=Object(a.useState)(0),Y=Object(d.a)(X,2),V=Y[0],Q=Y[1],Z=Object(a.useState)(!1),ee=Object(d.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),re=Object(d.a)(ae,2),oe=re[0],ce=re[1],le=Object(a.useRef)(null),ie=Object(a.useRef)(null),se=function(e){return N("selectedFeeds",e)},ue=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],D(n),e.prev=2,a=g()(E),e.next=6,G(t);case 6:r=e.sent,a[t].data=r,a[t].updatedAt=Date.now(),se(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),ce(e.t0.message);case 15:return e.prev=15,D(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[E]),me=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=E[t])&&!(null===(n=a.data)||void 0===n?void 0:n.length)||a&&Date.now()-(+a.updatedAt||0)>36e5)){e.next=5;break}return console.log("Fetching feed data for: "+a.title),e.next=5,ue(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E,ue]),de=Object(a.useCallback)((function(e){return function(){var t=j.indexOf(R)+e;t>=0&&t<j.length&&I(j[t])}}),[R,j]),fe=function(){return c.current&&K({open:!1,event:void 0})},pe=function(){return $(!1)},he=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=3;break}return e.next=3,ue(R,!1);case 3:t.detail.complete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=le.current)||void 0===n?void 0:n.getScrollElement();case 2:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===t;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=t.scrollTop;case 11:if(e.t0=e.t3,e.t0){e.next=14;break}e.t0=0;case 14:a=e.t0,V-a<50?te||(null===(r=ie.current)||void 0===r||r.classList.add("hide-footer"),ne(!0)):te&&(null===(o=ie.current)||void 0===o||o.classList.remove("hide-footer"),ne(!1)),Q(a);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e;if(!j.length)return o.push("/feeds");if(!j.length){var t=Object.keys(E);N("feedOrder",t)}if(R&&!E[R]||!R){var n=j[0];I(n),me(n).then(console.log).catch(console.error)}else me(R).then(console.log).catch(console.error);return le.current&&(e=Object(i.P)({el:le.current,gestureName:"swipe-gesture",onMove:function(e){e.deltaX>H/2?de(-1)():e.deltaX<-H/2&&de(1)()}})).enable(),v.a.App.addListener("backButton",Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=4;break}pe(),e.next=9;break;case 4:return e.next=6,v.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 6:t=e.sent,t.value&&v.a.App.exitApp();case 9:case"end":return e.stop()}}),e)})))),function(){var t;null===(t=e)||void 0===t||t.destroy(),v.a.App.removeAllListeners()}}),[j,E,o,R,me,de,J]);var Ee=R&&(null===(t=E[R])||void 0===t?void 0:t.data)||[];return r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,R?null===(n=E[R])||void 0===n?void 0:n.title:"Khabar"),r.a.createElement(i.d,{slot:"end"},w&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.t,{isOpen:B.open,event:B.event,onDidDismiss:fe},r.a.createElement(i.o,{detail:!1},r.a.createElement(i.p,null,"Theme"),r.a.createElement(i.H,{checked:"light"===u,color:"dark"===u?"light":"dark",onIonChange:function(){fe(),function(){var e=window.localStorage.theme||"dark";document.body.classList.remove(e),e="dark"===e?"light":"dark",document.body.classList.add(e),k("theme",e),window.localStorage.theme=e}()}})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:fe,routerLink:"/feeds"},r.a.createElement(i.p,null,"Feeds"),r.a.createElement(i.n,{title:"Feed",md:b.a,ios:b.b,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:fe,routerLink:"/reorder"},r.a.createElement(i.p,null,"Reorder"),r.a.createElement(i.n,{title:"Reorder",md:b.t,ios:b.s,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:function(){fe(),$(!0)}},r.a.createElement(i.p,null,"About"),r.a.createElement(i.n,{title:"Reorder",icon:b.o,slot:"end"}))),r.a.createElement(i.c,{onClick:function(e){return K({open:!0,event:e.nativeEvent})},slot:"end"},r.a.createElement(i.n,{slot:"icon-only",ios:b.m,md:b.n}))))),r.a.createElement(i.i,{ref:le,className:"article-content",scrollEvents:!0,onIonScrollEnd:be},r.a.createElement(i.u,{slot:"fixed",onIonRefresh:he},r.a.createElement(i.v,{refreshingSpinner:"dots"})),(!R||A)&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),Ee.length?Ee.map((function(e){return r.a.createElement(W,{key:e._id,article:e})})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(W,{key:"card"+t,article:{}})})),r.a.createElement(i.G,{isOpen:""!==oe,color:"danger",duration:15e3,onDidDismiss:function(){return ce("")},message:oe,buttons:[{text:"Retry",handler:function(){ue(R).then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})),Object(l.f)("desktop")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.j,{vertical:"center",horizontal:"start",slot:"fixed",hidden:0===j.indexOf(R)},r.a.createElement(i.k,{translucent:!0,onClick:de(-1)},r.a.createElement(i.n,{icon:b.g}))),r.a.createElement(i.j,{vertical:"center",horizontal:"end",slot:"fixed",hidden:j.indexOf(R)===j.length-1},r.a.createElement(i.k,{translucent:!0,onClick:de(1)},r.a.createElement(i.n,{icon:b.h})))),r.a.createElement(i.l,null,r.a.createElement(i.B,{ref:ie,className:"footer",scrollable:!0,value:R,onIonChange:function(e){return I(e.detail.value)}},j.map((function(e,t){return E[e]?r.a.createElement(i.C,{key:"segmentBtn"+e,value:e,"data-index":""+t,title:E[e].title},r.a.createElement("img",{alt:E[e].title,src:E[e].icon})):null})))),r.a.createElement(i.r,{isOpen:J,swipeToClose:!0,onDidDismiss:pe},r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"About"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{onClick:pe},"Close")))),r.a.createElement(T,null)))},q=n(122),J=n(123),$=n.n(J),X={minMatchCharLength:2,threshold:.4,keys:["title","description","categories"]},Y=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K("/v4/feeds/query?category=".concat(t.split("$").pop(),"&limit=100&page=1")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=M(),t=x("feeds"),n=Object(d.a)(t,1)[0],o=x("selectedFeeds"),c=Object(d.a)(o,1)[0],l=x("feedOrder"),s=Object(d.a)(l,1)[0],u=x("tags"),f=Object(d.a)(u,1)[0],E=x("isOffline"),y=Object(d.a)(E,1)[0],j=Object(a.useState)(!1),O=Object(d.a)(j,2),w=O[0],k=O[1],_=Object(a.useState)(""),C=Object(d.a)(_,2),A=C[0],D=C[1],F=Object(a.useState)("source-category$featured"),L=Object(d.a)(F,2),R=L[0],I=L[1],P=Object(a.useState)([]),T=Object(d.a)(P,2),U=T[0],B=T[1],W=Object(a.useState)(""),G=Object(d.a)(W,2),H=G[0],z=G[1],J=Object(a.useState)([]),V=Object(d.a)(J,2),Q=V[0],Z=V[1],ee=Object(a.useState)(""),te=Object(d.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useRef)(null),oe=new q.a(n,X),ce=function(e){return N("selectedFeeds",e)},le=function(e){return N("feedOrder",e)},ie=Object(a.useCallback)((function(e,t){k(!0),Z((t||n).filter((function(t){return t.categories.includes(e)}))),k(!1)}),[n]),se=Object(a.useCallback)(Object(h.a)(p.a.mark((function t(){var n,a,r,o,c=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(c.length>0&&void 0!==c[0])||c[0],k(n),t.prev=2,t.next=5,K("/v1/tags");case 5:return r=t.sent,t.next=8,Promise.all(r.reduce((function(e,t){var n=t._id,a=t.children;return a.length?e=e.concat(a.map((function(e){return Y(e._id)}))):e.push(Y(n)),e}),[]));case 8:o=t.sent,N("feeds",$()((a=[]).concat.apply(a,Object(m.a)(o)),"id")),N("tags",r),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),ae(t.t0.message);case 16:return t.prev=16,e.current&&k(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[2,13,16,19]])}))),[e]),ue=function(e,t){return function(){I(e),B(t),z(t.length?t[0]._id:""),ie(t.length?t[0]._id:e)}},me=function(e){return function(){z(e),ie(e)}},de=function(e){if(e.detail&&e.detail.value){var t=e.detail.value;D(t),Z(oe.search(t).map((function(e){return e.item})))}else D(""),ie(H||R)},fe=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(!1);case 2:t.detail.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return n.length&&f.length?Q.length||ie(R):se().then((function(){return console.log("Feeds fetched")})).catch(console.error),v.a.App.addListener("backButton",Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(c).length){e.next=6;break}return e.next=3,v.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 3:t=e.sent,t.value&&v.a.App.exitApp();case 6:case"end":return e.stop()}}),e)})))),function(){v.a.App.removeAllListeners()}}),[n,f,R,ie,Q,c,se]);var pe=Object.keys(c);return r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"Feeds"),r.a.createElement(i.d,{slot:"end"},y&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.c,{disabled:0===Object.keys(c).length,routerLink:"/home"},"Done")))),r.a.createElement(i.i,{className:"feed-content",ref:re},r.a.createElement(i.A,{value:A,placeholder:"Type website name or topic",onIonChange:de,onIonCancel:de}),r.a.createElement(i.u,{slot:"fixed",onIonRefresh:fe},r.a.createElement(i.v,{refreshingSpinner:"dots"})),w&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),""===A&&r.a.createElement("div",{className:"text-center"},f.length?f.map((function(e,t){var n=e._id,a=e.displayName,o=e.children;return r.a.createElement(i.h,Object.assign({key:n},R===n?{color:"secondary",outline:!0}:{},{onClick:ue(n,o)}),r.a.createElement(i.p,null,a))})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.h,{key:"chips"+t},r.a.createElement(i.D,{animated:!0,style:{width:Math.floor(Math.random()*(t+30))+20+"px"}}))})),U.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Be more specific"),U.map((function(e){var t=e._id,n=e.displayName;return r.a.createElement(i.h,Object.assign({key:t,className:"sub-tag"},H===t?{color:"secondary",outline:!0}:{},{onClick:me(t)}),r.a.createElement(i.p,null,n))})))),Q.length?Q.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e.id,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:e.title,src:e.icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description)),r.a.createElement(i.H,{slot:"end",checked:pe.includes(e.id),onIonChange:(t=e,Object(h.a)(p.a.mark((function e(){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,(a=g()(c))[n]?(delete a[n],r=Object(m.a)(s),o=r.indexOf(n),ce(a),o>-1&&(r.splice(o,1),le(r))):(a[n]=t,ce(a),le(Object(m.a)(new Set([].concat(Object(m.a)(s),[n])))));case 3:case"end":return e.stop()}}),e)}))))}));var t})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.o,{key:"skeleton"+t,detail:!1,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,r.a.createElement(i.D,{animated:!0,style:{width:"45%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"85%"}}))),r.a.createElement(i.D,{slot:"end",animated:!0,style:{width:"10%"}}))})),r.a.createElement(i.G,{isOpen:""!==ne,color:"danger",duration:15e3,onDidDismiss:function(){return ae("")},message:ne,buttons:[{text:"Retry",handler:function(){se().then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})))},Q=function(e){e.history;var t=x("selectedFeeds"),n=Object(d.a)(t,1)[0],o=x("feedOrder"),c=Object(d.a)(o,1)[0],l=function(e){return N("feedOrder",e)},s=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.detail){e.next=2;break}return e.abrupt("return");case 2:if(t.detail.from!==t.detail.to){e.next=4;break}return e.abrupt("return");case 4:(n=g()(c)).splice.apply(n,[t.detail.to,0].concat(Object(m.a)(n.splice(t.detail.from,1)))),l(n),t.detail.complete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(!c.length){var e=Object.keys(n);l(e)}}),[n,c]),r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:S.a})),r.a.createElement(i.F,null,"Reorder"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{routerLink:"/home"},"Done")))),r.a.createElement(i.i,{className:"feed-content"},r.a.createElement(i.x,{disabled:!1,onIonItemReorder:s},c.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:n[e].title,src:n[e].icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,n[e].title),r.a.createElement("p",null,n[e].description)),r.a.createElement(i.w,{slot:"end"}))})))))},Z=(n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(i.z,{id:"main"},r.a.createElement(s.b,{path:"/feeds",component:V,exact:!0}),r.a.createElement(s.b,{path:"/reorder",component:Q,exact:!0}),r.a.createElement(s.b,{path:"/home",component:z,exact:!0}),r.a.createElement(s.a,{to:"/home"}))))}),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ne=window.localStorage.theme||"dark";document.body.classList.add(ne),c.a.render(r.a.createElement(Z,null),document.getElementById("root")),Object(l.f)("capacitor")||function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!==a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister()})).then((function(){window.location.reload()})).catch(console.error):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})).catch(console.error)):te(t,e)}))}}()},31:function(e,t,n){e.exports=n.p+"static/media/logo.ed5d5347.svg"}},[[128,3,4]]]);
//# sourceMappingURL=main.d7c4f3dd.chunk.js.map