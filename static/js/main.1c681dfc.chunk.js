(this.webpackJsonpKhabar=this.webpackJsonpKhabar||[]).push([[1],{129:function(e,t,n){e.exports=n(273)},134:function(e,t,n){var a={"./ion-action-sheet.entry.js":[275,5],"./ion-alert.entry.js":[276,6],"./ion-app_8.entry.js":[277,7],"./ion-avatar_3.entry.js":[278,18],"./ion-back-button.entry.js":[279,19],"./ion-backdrop.entry.js":[280,43],"./ion-button_2.entry.js":[281,20],"./ion-card_5.entry.js":[282,21],"./ion-checkbox.entry.js":[283,22],"./ion-chip.entry.js":[284,23],"./ion-col_3.entry.js":[285,44],"./ion-datetime_3.entry.js":[286,10],"./ion-fab_3.entry.js":[287,24],"./ion-img.entry.js":[288,45],"./ion-infinite-scroll_2.entry.js":[289,46],"./ion-input.entry.js":[290,25],"./ion-item-option_3.entry.js":[291,26],"./ion-item_8.entry.js":[292,27],"./ion-loading.entry.js":[293,28],"./ion-menu_3.entry.js":[294,29],"./ion-modal.entry.js":[295,8],"./ion-nav_2.entry.js":[296,15],"./ion-popover.entry.js":[297,9],"./ion-progress-bar.entry.js":[298,30],"./ion-radio_2.entry.js":[299,31],"./ion-range.entry.js":[300,32],"./ion-refresher_2.entry.js":[301,11],"./ion-reorder_2.entry.js":[302,17],"./ion-ripple-effect.entry.js":[303,47],"./ion-route_4.entry.js":[304,33],"./ion-searchbar.entry.js":[305,34],"./ion-segment_2.entry.js":[306,35],"./ion-select_3.entry.js":[307,36],"./ion-slide_2.entry.js":[308,48],"./ion-spinner.entry.js":[309,13],"./ion-split-pane.entry.js":[310,49],"./ion-tab-bar_2.entry.js":[311,37],"./ion-tab_2.entry.js":[312,16],"./ion-text.entry.js":[313,38],"./ion-textarea.entry.js":[314,39],"./ion-toast.entry.js":[315,40],"./ion-toggle.entry.js":[316,12],"./ion-virtual-scroll.entry.js":[317,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=134,e.exports=r},156:function(e,t,n){var a={"./ion-icon.entry.js":[321,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=156,e.exports=r},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),l=n(14),i=n(2),s=n(36),u=n(127),m=n(16),d=n(8),f=n(3),p=n.n(f),h=n(12),b=n(11),g=n(35),E=n.n(g),v=n(120),y=n.n(v),j=n(18),O=n(15),w=n(122),k=Object(O.a)({isOffline:!1,sort:"popular",theme:"dark",feeds:[],tags:[],selectedFeeds:{},feedOrder:[]},Object.entries(localStorage).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];try{e[a]=JSON.parse(r)}catch(o){e[a]=r}return e}),{})),x=Object(w.a)(k),N=x.setGlobalState,_=x.useGlobalState,S=function(e,t){N(e,t);try{window.localStorage[e]=JSON.stringify(t)}catch(n){window.localStorage[e]=t}};window.addEventListener("online",(function(){return S("isOffline",!1)})),window.addEventListener("offline",(function(){return S("isOffline",!0)}));var C=n(32),A=n.n(C);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var L=r.a.createElement("path",{d:"M20.09 30.42l-6.1 3.53v18.87l58.8 33.95V60.85z",fill:"#ef8769"}),R=r.a.createElement("path",{d:"M72.79 0l-58.8 33.95v18.87l6.1 3.53 52.7-30.43z",fill:"#f4b691"}),I=function(e){var t=e.svgRef,n=e.title,a=F(e,["svgRef","title"]);return r.a.createElement("svg",D({viewBox:"0 0 86.77 86.77",ref:t},a),n?r.a.createElement("title",null,n):null,L,R)},P=r.a.forwardRef((function(e,t){return r.a.createElement(I,D({svgRef:t},e))})),T=(n.p,function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))}),U=[{url:"khabar.github.io",title:"Progressive Web App",description:r.a.createElement(r.a.Fragment,null,"The Web-app/PWA version of ",r.a.createElement("strong",null,"Khabar")," app is also available and powered by GitHub Pages.")},{logo:b.r,url:"github.com/khabar",title:"Source Code",description:"The complete source of this application is available in GitHub."},{logo:"https://usepanda.com/favicons/apple-touch-icon.png",url:"usepanda.com",title:"Data Source (API)",description:"Panda is freely available news reader where you can discover the best tools, resources and inspiration in the world of design and tech."},{logo:"https://ionicframework.com/img/meta/favicon-192x192.png",url:"ionicframework.com",title:"SDK/UI-toolkit (React)",description:"Ionic Framework is an open source UI toolkit for building cross-platform apps using web technologies."}],B=function(){return r.a.createElement(i.i,{className:"about text-center"},r.a.createElement(P,{style:{height:"10vh",marginTop:"5vh"}}),r.a.createElement("div",null,r.a.createElement("blockquote",null,r.a.createElement("strong",null,"Khabar")," is a free and open-source cross-platform mobile-app/PWA for staying informed about the best tools and techniques in the world of design and technology, powered by ",r.a.createElement("b",null,"Panda")," and developed by"," ",r.a.createElement(i.c,{className:"inline-button",fill:"clear",onClick:T("https://himalay.com.np")},"Himalay Sunuwar"),".")),r.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=np.com.himalay.khabar",target:"_system",rel:"noopener noreferrer"},r.a.createElement("img",{style:{maxHeight:"80px"},alt:"Get it on Google Play",src:"https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"})),r.a.createElement(i.q,null,U.map((function(e){var t=e.logo,n=e.url,a=e.title,o=e.description;return r.a.createElement(i.o,{key:a,detail:!1,button:!0,onClick:T("https://".concat(n))},r.a.createElement(i.b,{slot:"start"},t?r.a.createElement("img",{alt:a,src:t}):r.a.createElement(P,null)),r.a.createElement(i.p,null,r.a.createElement("h2",null,n),r.a.createElement("h3",null,a),r.a.createElement("p",null,o)))}))))},W=function(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),n=0;if(t<2)return"a moment ago";if(t<5)return"moments ago";if(t<60)return t+" seconds ago";if(t<120)return"a minute ago";if(t<3600){for(;t>=60;)t-=60,n+=1;return n+" minutes ago"}if(t<7200)return"an hour ago";if(t<86400){for(;t>=3600;)t-=3600,n+=1;return n+" hours ago"}if(t<172800)return"a day ago";if(t<604800){for(;t>=172800;)t-=172800,n+=1;return n+" days ago"}if(t<1209600)return"a week ago";if(t<2592e3){for(;t>=604800;)t-=604800,n+=1;return n+" weeks ago"}if(t<5184e3)return"a month ago";if(t<31536e3){for(;t>=2592e3;)t-=2592e3,n+=1;return n+" months ago"}return t<141912e4?"more than year ago":"never"},M=function(e){return Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.Browser.open({url:e});case 2:case"end":return t.stop()}}),t)})))},K=function(e){var t=e.article;return t._id?r.a.createElement(i.e,null,t.image.normal?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"img-btn",onClick:M(t.source.targetUrl)},r.a.createElement("img",{className:"card-img",alt:t.title||t.source.authorName||"x",src:t.image.normal})),r.a.createElement(i.p,{className:"item-text text-left"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description))):r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,button:!0,onClick:M(t.source.targetUrl),lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement("img",{alt:t.source.name,src:"https://www.google.com/s2/favicons?domain=".concat(t.source.targetUrl)})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.description)))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement("a",{className:"sub-link",href:t.source.sourceUrl,target:"_system",rel:"noopener noreferrer"},t.source.likesCount,r.a.createElement(i.n,{title:"Up-votes",icon:b.e,className:"up-arrow"}),t.source.commentsCount,r.a.createElement(i.n,{title:"Comments",style:{marginLeft:".15em"},icon:b.f}))," ".concat(W(t.source.createdAt)," by "),r.a.createElement("a",{className:"sub-link",href:["reddit","redditprogramming"].includes("segment")?"https://reddit.com/u/".concat(t.source.username):t.source.authorUrl,target:"_system",rel:"noopener noreferrer"},t.source.authorName||t.source.username))):r.a.createElement(i.e,null,r.a.createElement(i.g,{className:"p-0"},r.a.createElement(i.o,{detail:!1,lines:"none"},r.a.createElement(i.b,{className:"favicon",slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"item-text"},r.a.createElement("h2",null,r.a.createElement(i.D,{animated:!0,style:{width:"50%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"95%"}}))))),r.a.createElement(i.f,{className:"item-footer"},r.a.createElement(i.D,{animated:!0,style:{width:"40%"}})))},G=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},z="https://cors-anywhere.herokuapp.com/https://api.usepanda.com",H={headers:{Origin:"https://khabar.github.io/"}},q=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=500,r=n?Object(O.a)(Object(O.a)({},n),{},{headers:Object(O.a)(Object(O.a)({},n.headers||{}),H.headers)}):H,e.prev=2,e.next=5,fetch(z,r);case 5:a=e.sent.status,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:if(200!==a){e.next=19;break}return S("isOffline",!1),e.next=14,fetch(z+t,r);case 14:if(!(o=e.sent).ok){e.next=17;break}return e.abrupt("return",o.json());case 17:e.next=20;break;case 19:S("isOffline",!0);case 20:throw new Error("We encountered and error while trying to connect to the server.");case 21:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q("/v4/articles?feeds=".concat(t,"&limit=30&page=1&sort=").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=window.innerWidth,X=function(e){var t,n,o=e.history,c=G(),s=_("theme"),u=Object(d.a)(s,1)[0],f=_("sort"),g=Object(d.a)(f,1)[0],v=_("selectedFeeds"),O=Object(d.a)(v,1)[0],w=_("feedOrder"),k=Object(d.a)(w,1)[0],x=_("isOffline"),C=Object(d.a)(x,1)[0],D=Object(a.useState)(!1),F=Object(d.a)(D,2),L=F[0],R=F[1],I=Object(a.useState)(""),P=Object(d.a)(I,2),T=P[0],U=P[1],W=Object(a.useState)({open:!1,event:void 0}),M=Object(d.a)(W,2),z=M[0],H=M[1],q=Object(a.useState)(!1),X=Object(d.a)(q,2),Y=X[0],V=X[1],Q=Object(a.useState)(0),Z=Object(d.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!1),ae=Object(d.a)(ne,2),re=ae[0],oe=ae[1],ce=Object(a.useState)(""),le=Object(d.a)(ce,2),ie=le[0],se=le[1],ue=Object(a.useRef)(null),me=Object(a.useRef)(null),de=function(e){return S("selectedFeeds",e)},fe=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,o,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],a=c.length>2?c[2]:void 0,R(n),e.prev=3,r=E()(O),e.next=7,J(t,a||g);case 7:o=e.sent,r[t].data=o,r[t].updatedAt=Date.now(),de(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),se(e.t0.message);case 16:return e.prev=16,R(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[O,g]),pe=Object(a.useCallback)(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=O[t])&&!(null===(n=a.data)||void 0===n?void 0:n.length)||a&&Date.now()-(+a.updatedAt||0)>36e5)){e.next=5;break}return console.log("Fetching feed data for: "+a.title),e.next=5,fe(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,fe]),he=Object(a.useCallback)((function(e){return function(){var t=k.indexOf(T)+e;t>=0&&t<k.length&&U(k[t])}}),[T,k]),be=function(){return c.current&&H({open:!1,event:void 0})},ge=function(){return V(!1)},Ee=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=3;break}return e.next=3,fe(T,!1);case 3:t.detail.complete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.detail||0,a=n.scrollTop,ee<a?re||(null===(r=me.current)||void 0===r||r.classList.add("hide-footer"),oe(!0)):re&&(null===(o=me.current)||void 0===o||o.classList.remove("hide-footer"),oe(!1)),te(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e;if(!k.length)return o.push("/feeds");if(!k.length){var t=Object.keys(O);S("feedOrder",t)}if(T&&!O[T]||!T){var n=k[0];U(n),pe(n).then(console.log).catch(console.error)}else pe(T).then(console.log).catch(console.error);return ue.current&&(e=Object(i.P)({el:ue.current,gestureName:"swipe-gesture",onMove:function(e){e.deltaX>$/2?he(-1)():e.deltaX<-$/2&&he(1)()}})).enable(),j.a.App.addListener("backButton",Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=4;break}ge(),e.next=9;break;case 4:return e.next=6,j.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 6:t=e.sent,t.value&&j.a.App.exitApp();case 9:case"end":return e.stop()}}),e)})))),function(){var t;null===(t=e)||void 0===t||t.destroy(),j.a.App.removeAllListeners()}}),[k,O,o,T,pe,he,Y]);var ye=T&&(null===(t=O[T])||void 0===t?void 0:t.data)||[];return r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:A.a})),r.a.createElement(i.F,null,T?null===(n=O[T])||void 0===n?void 0:n.title:"Khabar"),r.a.createElement(i.d,{slot:"end"},C&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.c,{onClick:function(){be(),function(e){var t=window.localStorage.sort||"popular";document.body.classList.remove(t),t="popular"===t?"latest":"popular",document.body.classList.add(t),N("sort",t),window.localStorage.sort=t,e(t)}(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(T,!0,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},slot:"end",title:g[0].toUpperCase()+g.slice(1)},r.a.createElement(i.n,{slot:"icon-only",ios:"popular"===g?b.p:b.z,md:"popular"===g?b.o:b.y})),r.a.createElement(i.t,{isOpen:z.open,event:z.event,onDidDismiss:be},r.a.createElement(i.o,{detail:!1},r.a.createElement(i.p,null,"Theme"),r.a.createElement(i.H,{checked:"light"===u,color:"dark"===u?"light":"dark",onIonChange:function(){be(),function(){var e=window.localStorage.theme||"dark";document.body.classList.remove(e),e="dark"===e?"light":"dark",document.body.classList.add(e),N("theme",e),window.localStorage.theme=e}()}})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:be,routerLink:"/feeds"},r.a.createElement(i.p,null,"Feeds"),r.a.createElement(i.n,{title:"Feed",md:b.a,ios:b.b,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:be,routerLink:"/reorder"},r.a.createElement(i.p,null,"Reorder"),r.a.createElement(i.n,{title:"Reorder",md:b.v,ios:b.u,slot:"end"})),r.a.createElement(i.o,{detail:!1,button:!0,onClick:function(){be(),V(!0)}},r.a.createElement(i.p,null,"About"),r.a.createElement(i.n,{title:"Reorder",icon:b.q,slot:"end"}))),r.a.createElement(i.c,{onClick:function(e){return H({open:!0,event:e.nativeEvent})},slot:"end",title:"Menu"},r.a.createElement(i.n,{slot:"icon-only",ios:b.m,md:b.n}))))),r.a.createElement(i.i,{ref:ue,className:"article-content",scrollEvents:!0,onIonScroll:y()(ve,200)},r.a.createElement(i.u,{slot:"fixed",onIonRefresh:Ee},r.a.createElement(i.v,{refreshingSpinner:"dots"})),(!T||L)&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),ye.length?ye.map((function(e){return r.a.createElement(K,{key:e._id,article:e})})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(K,{key:"card"+t,article:{}})})),r.a.createElement(i.G,{isOpen:""!==ie,color:"danger",duration:15e3,onDidDismiss:function(){return se("")},message:ie,buttons:[{text:"Retry",handler:function(){fe(T).then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})),Object(l.f)("desktop")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.j,{vertical:"center",horizontal:"start",slot:"fixed",hidden:0===k.indexOf(T)},r.a.createElement(i.k,{translucent:!0,onClick:he(-1)},r.a.createElement(i.n,{icon:b.g}))),r.a.createElement(i.j,{vertical:"center",horizontal:"end",slot:"fixed",hidden:k.indexOf(T)===k.length-1},r.a.createElement(i.k,{translucent:!0,onClick:he(1)},r.a.createElement(i.n,{icon:b.h})))),r.a.createElement(i.l,null,r.a.createElement(i.B,{ref:me,className:"footer",scrollable:!0,value:T,onIonChange:function(e){return U(e.detail.value)}},k.map((function(e,t){return O[e]?r.a.createElement(i.C,{key:"segmentBtn"+e,value:e,"data-index":""+t,title:O[e].title},r.a.createElement("img",{alt:O[e].title,src:O[e].icon})):null})))),r.a.createElement(i.r,{isOpen:Y,swipeToClose:!0,onDidDismiss:ge},r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:A.a})),r.a.createElement(i.F,null,"About"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{onClick:ge},"Close")))),r.a.createElement(B,null)))},Y=n(123),V=n(124),Q=n.n(V),Z={minMatchCharLength:2,threshold:.4,keys:["title","description","categories"]},ee=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q("/v4/feeds/query?category=".concat(t.split("$").pop(),"&limit=100&page=1")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=G(),t=_("feeds"),n=Object(d.a)(t,1)[0],o=_("selectedFeeds"),c=Object(d.a)(o,1)[0],l=_("feedOrder"),s=Object(d.a)(l,1)[0],u=_("tags"),f=Object(d.a)(u,1)[0],g=_("isOffline"),v=Object(d.a)(g,1)[0],y=Object(a.useState)(!1),O=Object(d.a)(y,2),w=O[0],k=O[1],x=Object(a.useState)(""),N=Object(d.a)(x,2),C=N[0],D=N[1],F=Object(a.useState)("source-category$featured"),L=Object(d.a)(F,2),R=L[0],I=L[1],P=Object(a.useState)([]),T=Object(d.a)(P,2),U=T[0],B=T[1],W=Object(a.useState)(""),M=Object(d.a)(W,2),K=M[0],z=M[1],H=Object(a.useState)([]),J=Object(d.a)(H,2),$=J[0],X=J[1],V=Object(a.useState)(""),te=Object(d.a)(V,2),ne=te[0],ae=te[1],re=Object(a.useRef)(null),oe=new Y.a(n,Z),ce=function(e){return S("selectedFeeds",e)},le=function(e){return S("feedOrder",e)},ie=Object(a.useCallback)((function(e,t){k(!0),X((t||n).filter((function(t){return t.categories.includes(e)}))),k(!1)}),[n]),se=Object(a.useCallback)(Object(h.a)(p.a.mark((function t(){var n,a,r,o,c=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(c.length>0&&void 0!==c[0])||c[0],k(n),t.prev=2,t.next=5,q("/v1/tags");case 5:return r=t.sent,t.next=8,Promise.all(r.reduce((function(e,t){var n=t._id,a=t.children;return a.length?e=e.concat(a.map((function(e){return ee(e._id)}))):e.push(ee(n)),e}),[]));case 8:o=t.sent,S("feeds",Q()((a=[]).concat.apply(a,Object(m.a)(o)),"id")),S("tags",r),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),ae(t.t0.message);case 16:return t.prev=16,e.current&&k(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[2,13,16,19]])}))),[e]),ue=function(e,t){return function(){I(e),B(t),z(t.length?t[0]._id:""),ie(t.length?t[0]._id:e)}},me=function(e){return function(){z(e),ie(e)}},de=function(e){if(e.detail&&e.detail.value){var t=e.detail.value;D(t),X(oe.search(t).map((function(e){return e.item})))}else D(""),ie(K||R)},fe=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(!1);case 2:t.detail.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return n.length&&f.length?$.length||ie(R):se().then((function(){return console.log("Feeds fetched")})).catch(console.error),j.a.App.addListener("backButton",Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(c).length){e.next=6;break}return e.next=3,j.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 3:t=e.sent,t.value&&j.a.App.exitApp();case 6:case"end":return e.stop()}}),e)})))),function(){j.a.App.removeAllListeners()}}),[n,f,R,ie,$,c,se]);var pe=Object.keys(c);return r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:A.a})),r.a.createElement(i.F,null,"Feeds"),r.a.createElement(i.d,{slot:"end"},v&&r.a.createElement(i.n,{title:"Offline",icon:b.l}),r.a.createElement(i.c,{disabled:0===Object.keys(c).length,routerLink:"/home"},"Done")))),r.a.createElement(i.i,{className:"feed-content",ref:re},r.a.createElement(i.A,{value:C,placeholder:"Type website name or topic",onIonChange:de,onIonCancel:de}),r.a.createElement(i.u,{slot:"fixed",onIonRefresh:fe},r.a.createElement(i.v,{refreshingSpinner:"dots"})),w&&r.a.createElement(i.E,{className:"w-100",name:"dots",duration:30}),""===C&&r.a.createElement("div",{className:"text-center"},f.length?f.map((function(e,t){var n=e._id,a=e.displayName,o=e.children;return r.a.createElement(i.h,Object.assign({key:n},R===n?{color:"secondary",outline:!0}:{},{onClick:ue(n,o)}),r.a.createElement(i.p,null,a))})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.h,{key:"chips"+t},r.a.createElement(i.D,{animated:!0,style:{width:Math.floor(Math.random()*(t+30))+20+"px"}}))})),U.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Be more specific"),U.map((function(e){var t=e._id,n=e.displayName;return r.a.createElement(i.h,Object.assign({key:t,className:"sub-tag"},K===t?{color:"secondary",outline:!0}:{},{onClick:me(t)}),r.a.createElement(i.p,null,n))})))),$.length?$.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e.id,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:e.title,src:e.icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description)),r.a.createElement(i.H,{slot:"end",checked:pe.includes(e.id),onIonChange:(t=e,Object(h.a)(p.a.mark((function e(){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,(a=E()(c))[n]?(delete a[n],r=Object(m.a)(s),o=r.indexOf(n),ce(a),o>-1&&(r.splice(o,1),le(r))):(a[n]=t,ce(a),le(Object(m.a)(new Set([].concat(Object(m.a)(s),[n])))));case 3:case"end":return e.stop()}}),e)}))))}));var t})):Object(m.a)(new Array(12)).map((function(e,t){return r.a.createElement(i.o,{key:"skeleton"+t,detail:!1,className:"w-100"},r.a.createElement(i.b,{slot:"start"},r.a.createElement(i.D,{animated:!0})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,r.a.createElement(i.D,{animated:!0,style:{width:"45%"}})),r.a.createElement("p",null,r.a.createElement(i.D,{animated:!0,style:{width:"85%"}}))),r.a.createElement(i.D,{slot:"end",animated:!0,style:{width:"10%"}}))})),r.a.createElement(i.G,{isOpen:""!==ne,color:"danger",duration:15e3,onDidDismiss:function(){return ae("")},message:ne,buttons:[{text:"Retry",handler:function(){se().then((function(){return console.log("Feeds fetched")})).catch(console.error)}}]})))},ne=function(e){e.history;var t=_("selectedFeeds"),n=Object(d.a)(t,1)[0],o=_("feedOrder"),c=Object(d.a)(o,1)[0],l=function(e){return S("feedOrder",e)},s=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.detail){e.next=2;break}return e.abrupt("return");case 2:if(t.detail.from!==t.detail.to){e.next=4;break}return e.abrupt("return");case 4:(n=E()(c)).splice.apply(n,[t.detail.to,0].concat(Object(m.a)(n.splice(t.detail.from,1)))),l(n),t.detail.complete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(!c.length){var e=Object.keys(n);l(e)}}),[n,c]),r.a.createElement(i.s,null,r.a.createElement(i.m,null,r.a.createElement(i.I,null,r.a.createElement(i.d,{slot:"start"},r.a.createElement(i.n,{title:"Khabar",slot:"icon-only",src:A.a})),r.a.createElement(i.F,null,"Reorder"),r.a.createElement(i.d,{slot:"end"},r.a.createElement(i.c,{routerLink:"/home"},"Done")))),r.a.createElement(i.i,{className:"feed-content"},r.a.createElement(i.x,{disabled:!1,onIonItemReorder:s},c.map((function(e){return r.a.createElement(i.o,{detail:!1,key:e},r.a.createElement(i.b,{slot:"start"},r.a.createElement("img",{alt:n[e].title,src:n[e].icon})),r.a.createElement(i.p,{className:"ion-text-wrap"},r.a.createElement("h3",null,n[e].title),r.a.createElement("p",null,n[e].description)),r.a.createElement(i.w,{slot:"end"}))})))))},ae=(n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(i.z,{id:"main"},r.a.createElement(s.b,{path:"/feeds",component:te,exact:!0}),r.a.createElement(s.b,{path:"/reorder",component:ne,exact:!0}),r.a.createElement(s.b,{path:"/home",component:X,exact:!0}),r.a.createElement(s.a,{to:"/home"}))))}),re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ce=window.localStorage.theme||"dark";document.body.classList.add(ce),c.a.render(r.a.createElement(ae,null),document.getElementById("root")),Object(l.f)("capacitor")||function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");re?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!==a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister()})).then((function(){window.location.reload()})).catch(console.error):oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})).catch(console.error)):oe(t,e)}))}}()},32:function(e,t,n){e.exports=n.p+"static/media/logo.ed5d5347.svg"}},[[129,3,4]]]);
//# sourceMappingURL=main.1c681dfc.chunk.js.map