(this.webpackJsonpKhabar=this.webpackJsonpKhabar||[]).push([[1],{102:function(e,t,n){e.exports=n.p+"static/media/logo.ed5d5347.svg"},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(11),i=n(0),c=n.n(i),s=n(28),u=n.n(s),l=n(21),d=n(2),f=n(65),m=n(16),p=n(13),h=n(55),g=n.n(h),v=n(56),b=n.n(v),w=n(57),y=n.n(w),k=n(58),j=n.n(k),x=n(59),E=n.n(x),O=n(60),_=n.n(O),N=n(61),S=n.n(N),C=n(62),T=n.n(C),A=n(63),U=n.n(A),D=[{path:"hackernews",icon:p.l,title:"Hacker News"},{path:"github",icon:p.k,title:"GitHub Trending"},{path:"reddit",src:y.a,title:"Reddit"},{path:"devto",src:g.a,title:"DEV Community"},{path:"echojs",src:b.a,title:"Echo JS"},{path:"redditprogramming",src:j.a,title:"Reddit: Programming"},{path:"datatau",src:S.a,title:"DataTau"},{path:"medium",src:E.a,title:"Medium"},{path:"growthhackers",src:T.a,title:"GrowthHackers"},{path:"producthunt",src:_.a,title:"Product Hunt"},{path:"stackoverflow",src:U.a,title:"Stack Overflow"}],L=n(69),R=function(e){return JSON.parse(window.localStorage[e]||"[]")},W={segment:D[0].path,loading:!1,theme:window.localStorage.theme||"dark",hackernews:R("hackernews"),github:R("github"),echojs:R("echojs"),devto:R("devto"),redditprogramming:R("redditprogramming"),datatau:R("datatau"),medium:R("medium"),reddit:R("reddit"),growthhackers:R("growthhackers"),producthunt:R("producthunt"),stackoverflow:R("stackoverflow")},B=Object(L.a)(W),I=B.setGlobalState,P=B.useGlobalState,J=function(e){I("loading",e)},M=function(){var e=window.localStorage.theme||"dark";document.body.classList.remove(e),e="dark"===e?"light":"dark",document.body.classList.add(e),I("theme",e),window.localStorage.theme=e},G=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(t,n),window.localStorage[t]=JSON.stringify(n),e.next=4,l.a.Browser.prefetch({urls:n.map((function(e){return e.source.targetUrl}))});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(e){I("segment",e)},F=function(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),n=0;if(t<2)return"a moment ago";if(t<5)return"moments ago";if(t<60)return t+" seconds ago";if(t<120)return"a minute ago";if(t<3600){for(;t>=60;)t-=60,n+=1;return n+" minutes ago"}if(t<7200)return"an hour ago";if(t<86400){for(;t>=3600;)t-=3600,n+=1;return n+" hours ago"}if(t<172800)return"a day ago";if(t<604800){for(;t>=172800;)t-=172800,n+=1;return n+" days ago"}if(t<1209600)return"a week ago";if(t<2592e3){for(;t>=604800;)t-=604800,n+=1;return n+" weeks ago"}if(t<5184e3)return"a month ago";if(t<31536e3){for(;t>=2592e3;)t-=2592e3,n+=1;return n+" months ago"}return t<141912e4?"more than year ago":"never"},K=n(64),V=[["hackernews","5718e53e7a84fb1901e05971"],["github","5718e53e7a84fb1901e059cc"],["echojs","5718e53e7a84fb1901e0592e"],["devto","5bbb1af8af62ff6841b4b26e"],["medium","5718e53e7a84fb1901e05929"],["reddit","5b910ac49642a1e1c6928ab0"],["growthhackers","5718e53d7a84fb1901e0590f"],["datatau","5718e53e7a84fb1901e0592f"],["redditprogramming","59be493f3532e00343101d80"],["producthunt","5718e53e7a84fb1901e059c7"],["stackoverflow","5b63425c9642a1e1c6927e9e"]],Y={headers:{Origin:"https://khabar.github.io/"}},$=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/api.usepanda.com/v4/articles?limit=30&page=1&sort=popular&feeds="+n,Y);case 2:return e.next=4,e.sent.json();case 4:return r=e.sent.filter((function(e){return void 0===e.source.likesCount||e.source.likesCount})),e.next=7,G(t,r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=Date.now(),r=+(window.localStorage.getItem("fetchedAt")||0),!t){e.next=10;break}if(!(o=V.find((function(e){return Object(m.a)(e,1)[0]===t})))){e.next=8;break}return e.next=8,$(t,o[1]);case 8:e.next=30;break;case 10:if(!(n-r>36e5)){e.next=30;break}window.localStorage.setItem("fetchedAt",""+n),J(!0),i=Object(K.a)(V),e.prev=14,i.s();case 16:if((c=i.n()).done){e.next=22;break}return s=Object(m.a)(c.value,2),u=s[0],l=s[1],e.next=20,$(u,l);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),console.error(e.t1);case 35:return e.prev=35,J(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,32,35,38],[14,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),z=c.a.createRef(),Q=c.a.createRef(),X=function(){var e=P("segment"),t=Object(m.a)(e,1)[0],r=D.find((function(e){return e.path===t})),s=P("loading"),u=Object(m.a)(s,1)[0],f=Object(i.useState)(D[0].path),h=Object(m.a)(f,2),g=h[0],v=h[1],b=function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:n.detail.complete();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),v(t.detail.value),e.next=4,Q.current.slideTo(+t.explicitOriginalTarget.dataset.index);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=H,e.next=3,Q.current.getActiveIndex();case 3:e.t1=e.sent,e.t2=D[e.t1].path,(0,e.t0)(e.t2),z.current.scrollToTop();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.j,null,c.a.createElement(d.x,{className:t},c.a.createElement(d.d,{slot:"start"},c.a.createElement(d.k,{title:"Khabar",slot:"icon-only",src:n(102)})),c.a.createElement(d.w,null,r.title),u&&c.a.createElement(d.v,{name:"dots",slot:"end",duration:30}),c.a.createElement(d.d,{slot:"end"},c.a.createElement(d.c,{onClick:M},c.a.createElement(d.k,{title:"Toggle theme",className:"theme-toggle",icon:p.j,slot:"icon-only"}))))),c.a.createElement(d.h,{ref:z},c.a.createElement(d.o,{slot:"fixed",onIonRefresh:b},c.a.createElement(d.p,{refreshingSpinner:"dots"})),c.a.createElement(d.u,{ref:Q,options:{initialSlide:0,slidesPerView:1},onIonSlideWillChange:y},D.filter((function(e){var t=e.path;return localStorage[t]})).map((function(e){var n=e.path,r=e.title,i=JSON.parse(localStorage[n]);return c.a.createElement(d.t,{key:n,title:r,className:"cards ".concat(n)},i.map((function(e){return c.a.createElement(d.e,{key:e._id},c.a.createElement(d.g,{className:"p-0"},c.a.createElement(d.l,{button:!0,onClick:(n=e.source.targetUrl,Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.Browser.open({url:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),lines:"none"},c.a.createElement(d.b,{className:"favicon",slot:"start"},c.a.createElement("img",{alt:e.source.displayName,src:"https://www.google.com/s2/favicons?domain=".concat(e.source.targetUrl)})),c.a.createElement(d.m,{className:"item-text"},c.a.createElement("h2",null,e.title),e.description&&c.a.createElement("p",null,e.description)))),c.a.createElement(d.f,{className:"item-footer"},c.a.createElement("a",{hidden:"medium"===t,className:"sub-link",href:e.source.sourceUrl,target:"_system",rel:"noopener noreferrer"},e.source.likesCount,c.a.createElement(d.k,{title:"Up-votes",icon:p.c,className:"up-arrow"}),e.source.commentsCount,c.a.createElement(d.k,{title:"Comments",style:{marginLeft:".15em"},icon:p.d}))," ".concat(F(e.source.createdAt)," by "),c.a.createElement("a",{className:"sub-link",href:["reddit","redditprogramming"].includes(t)?"https://reddit.com/u/".concat(e.source.username):e.source.authorUrl,target:"_system",rel:"noopener noreferrer"},e.source.authorName||e.source.username)));var n})))})))),c.a.createElement(d.i,{className:t},c.a.createElement(d.r,{scrollable:!0,onIonChange:w,value:g},D.map((function(e,t){var n=e.path,r=e.title,a=e.icon,o=e.src;return c.a.createElement(d.s,{key:n,value:n,"data-index":""+t},c.a.createElement(d.k,Object.assign({title:r},a?{icon:a}:{src:o})))})))))},Z=(n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),function(){return q().catch(console.error),c.a.createElement(d.a,null,c.a.createElement(f.a,null,c.a.createElement(d.n,{id:"main"},c.a.createElement(X,null))))}),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ne=window.localStorage.theme||"dark";document.body.classList.add(ne),l.a.App.addListener("backButton",Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.Modals.confirm({title:"Exit",message:"Are you sure you want to exit?",cancelButtonTitle:"No",okButtonTitle:"Yes"});case 2:t=e.sent,t.value&&l.a.App.exitApp();case 5:case"end":return e.stop()}}),e)})))),u.a.render(c.a.createElement(Z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):te(t,e)}))}}()},55:function(e,t,n){e.exports=n.p+"static/media/devto.d6f379c0.svg"},56:function(e,t,n){e.exports=n.p+"static/media/echojs.3e00b929.svg"},57:function(e,t,n){e.exports=n.p+"static/media/reddit.e3d4b9fe.svg"},58:function(e,t,n){e.exports=n.p+"static/media/redditprogramming.7906984b.svg"},59:function(e,t,n){e.exports=n.p+"static/media/medium.7246322d.svg"},60:function(e,t,n){e.exports=n.p+"static/media/producthunt.71db4167.svg"},61:function(e,t,n){e.exports=n.p+"static/media/datatau.1b39eba5.svg"},62:function(e,t,n){e.exports=n.p+"static/media/growthhackers.b009b6c4.svg"},63:function(e,t,n){e.exports=n.p+"static/media/stackoverflow.a2c89748.svg"},70:function(e,t,n){e.exports=n(115)},76:function(e,t,n){var r={"./ion-action-sheet.entry.js":[117,5],"./ion-alert.entry.js":[118,6],"./ion-app_8.entry.js":[119,7],"./ion-avatar_3.entry.js":[120,18],"./ion-back-button.entry.js":[121,19],"./ion-backdrop.entry.js":[122,43],"./ion-button_2.entry.js":[123,20],"./ion-card_5.entry.js":[124,21],"./ion-checkbox.entry.js":[125,22],"./ion-chip.entry.js":[126,23],"./ion-col_3.entry.js":[127,44],"./ion-datetime_3.entry.js":[128,10],"./ion-fab_3.entry.js":[129,24],"./ion-img.entry.js":[130,45],"./ion-infinite-scroll_2.entry.js":[131,46],"./ion-input.entry.js":[132,25],"./ion-item-option_3.entry.js":[133,26],"./ion-item_8.entry.js":[134,27],"./ion-loading.entry.js":[135,28],"./ion-menu_3.entry.js":[136,29],"./ion-modal.entry.js":[137,8],"./ion-nav_2.entry.js":[138,15],"./ion-popover.entry.js":[139,9],"./ion-progress-bar.entry.js":[140,30],"./ion-radio_2.entry.js":[141,31],"./ion-range.entry.js":[142,32],"./ion-refresher_2.entry.js":[143,11],"./ion-reorder_2.entry.js":[144,17],"./ion-ripple-effect.entry.js":[145,47],"./ion-route_4.entry.js":[146,33],"./ion-searchbar.entry.js":[147,34],"./ion-segment_2.entry.js":[148,35],"./ion-select_3.entry.js":[149,36],"./ion-slide_2.entry.js":[150,48],"./ion-spinner.entry.js":[151,13],"./ion-split-pane.entry.js":[152,49],"./ion-tab-bar_2.entry.js":[153,37],"./ion-tab_2.entry.js":[154,16],"./ion-text.entry.js":[155,38],"./ion-textarea.entry.js":[156,39],"./ion-toast.entry.js":[157,40],"./ion-toggle.entry.js":[158,12],"./ion-virtual-scroll.entry.js":[159,50]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=76,e.exports=a},97:function(e,t,n){var r={"./ion-icon.entry.js":[163,57]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=97,e.exports=a}},[[70,3,4]]]);
//# sourceMappingURL=main.fdc7e857.chunk.js.map